<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <!-- Primary Meta Tags - Dynamic values should be populated server-side or via JS -->
  <title>{{COURSE_NAME}} | Golf The Bay - Tee Times & Course Info</title>
  <meta name="title" content="{{COURSE_NAME}} | Golf The Bay - Tee Times & Course Info">
  <meta name="description" content="Book tee times at {{COURSE_NAME}} in {{CITY}}, {{REGION}}. {{HOLES}} holes, Par {{PAR}}, {{YARDAGE}} yards. View live availability, course stats, and book online.">
  <meta name="keywords" content="{{COURSE_NAME}}, {{CITY}} golf, {{REGION}} golf courses, tee times {{CITY}}, bay area golf, book tee times, golf near me">
  <meta name="author" content="Golf The Bay">
  <meta name="robots" content="index, follow">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://golfthebay.com/course/{{COURSE_SLUG}}">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://golfthebay.com/course/{{COURSE_SLUG}}">
  <meta property="og:title" content="{{COURSE_NAME}} | Golf The Bay - Tee Times & Course Info">
  <meta property="og:description" content="Book tee times at {{COURSE_NAME}} in {{CITY}}. {{HOLES}} holes, Par {{PAR}}. View live availability and book online.">
  <meta property="og:image" content="https://golfthebay.com/images/courses/{{COURSE_SLUG}}.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Golf The Bay">
  <meta property="og:locale" content="en_US">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://golfthebay.com/course/{{COURSE_SLUG}}">
  <meta name="twitter:title" content="{{COURSE_NAME}} | Golf The Bay">
  <meta name="twitter:description" content="Book tee times at {{COURSE_NAME}} in {{CITY}}. {{HOLES}} holes, Par {{PAR}}. Live availability.">
  <meta name="twitter:image" content="https://golfthebay.com/images/courses/{{COURSE_SLUG}}.jpg">

  <!-- Geo Meta Tags for Local SEO -->
  <meta name="geo.region" content="US-CA">
  <meta name="geo.placename" content="{{CITY}}, California">
  <meta name="geo.position" content="{{LATITUDE}};{{LONGITUDE}}">
  <meta name="ICBM" content="{{LATITUDE}}, {{LONGITUDE}}">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <meta name="theme-color" content="#2d5a27">

  <!-- PWA / iOS App -->
  <link rel="manifest" href="/manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Golf The Bay">

  <!-- JSON-LD Structured Data for Golf Course -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "GolfCourse",
    "name": "{{COURSE_NAME}}",
    "url": "https://golfthebay.com/course/{{COURSE_SLUG}}",
    "image": "https://golfthebay.com/images/courses/{{COURSE_SLUG}}.jpg",
    "description": "{{COURSE_NAME}} is a {{HOLES}}-hole golf course in {{CITY}}, California. Par {{PAR}}, {{YARDAGE}} yards.",
    "telephone": "{{PHONE_NUMBER}}",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "{{CITY}}",
      "addressRegion": "CA",
      "addressCountry": "US"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": {{LATITUDE}},
      "longitude": {{LONGITUDE}}
    },
    "openingHoursSpecification": {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
      "opens": "06:00",
      "closes": "18:00"
    },
    "amenityFeature": [
      {
        "@type": "LocationFeatureSpecification",
        "name": "Number of Holes",
        "value": "{{HOLES}}"
      },
      {
        "@type": "LocationFeatureSpecification",
        "name": "Par",
        "value": "{{PAR}}"
      },
      {
        "@type": "LocationFeatureSpecification",
        "name": "Yardage",
        "value": "{{YARDAGE}}"
      }
    ],
    "potentialAction": {
      "@type": "ReserveAction",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "{{BOOKING_URL}}",
        "actionPlatform": [
          "http://schema.org/DesktopWebPlatform",
          "http://schema.org/MobileWebPlatform"
        ]
      },
      "result": {
        "@type": "Reservation",
        "name": "Tee Time Reservation"
      }
    }
  }
  </script>

  <!-- BreadcrumbList Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://golfthebay.com/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Courses",
        "item": "https://golfthebay.com/courses.html"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "{{REGION}}",
        "item": "https://golfthebay.com/courses.html?region={{REGION_SLUG}}"
      },
      {
        "@type": "ListItem",
        "position": 4,
        "name": "{{COURSE_NAME}}",
        "item": "https://golfthebay.com/course/{{COURSE_SLUG}}"
      }
    ]
  }
  </script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/animations.css">
  <link rel="stylesheet" href="/css/micro-interactions.css">

  <style>
    :root {
      --primary: #2d5a27;
      --primary-light: #4a7a3f;
      --primary-dark: #1a3d17;
      --bg: #f4f1e8;
      --bg-paper: #f9f6ef;
      --card-bg: #fffef9;
      --text: #3d2914;
      --text-muted: #6b5344;
      --border: #c4a882;
      --border-light: #ddd0bc;
      --success: #10B981;
      --success-dark: #059669;
      --deal: #8b2500;
      --gold: #b8860b;
      --water: #5d8aa8;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Source Serif 4', Georgia, 'Times New Roman', serif;
      background: var(--bg);
      background-image:
        repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(139, 115, 85, 0.03) 40px, rgba(139, 115, 85, 0.03) 41px),
        repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(139, 115, 85, 0.03) 40px, rgba(139, 115, 85, 0.03) 41px);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }

    /* Skip link for accessibility */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--primary);
      color: white;
      padding: 8px 16px;
      z-index: 10000;
      text-decoration: none;
      border-radius: 0 0 4px 0;
    }
    .skip-link:focus { top: 0; }

    /* Header */
    header {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary));
      color: #f4f1e8;
      padding: 16px 0;
      border-bottom: 4px solid var(--border);
      box-shadow: 0 4px 12px rgba(61, 41, 20, 0.15);
    }
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: 0.02em;
    }
    header h1 a {
      color: inherit;
      text-decoration: none;
    }
    header h1 a:hover {
      opacity: 0.9;
    }
    .header-nav {
      display: flex;
      gap: 10px;
    }
    .nav-btn {
      color: #f4f1e8;
      text-decoration: none;
      font-family: 'Playfair Display', Georgia, serif;
      padding: 8px 14px;
      border: 2px solid rgba(255,255,255,0.5);
      border-radius: 4px;
      transition: all 0.2s;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .nav-btn:hover { background: rgba(255,255,255,0.1); border-color: #fff; }
    .nav-btn svg { width: 16px; height: 16px; }

    /* Breadcrumb */
    .breadcrumb {
      padding: 16px 0;
      font-size: 0.9rem;
    }
    .breadcrumb a {
      color: var(--text-muted);
      text-decoration: none;
    }
    .breadcrumb a:hover {
      color: var(--primary);
      text-decoration: underline;
    }
    .breadcrumb span {
      color: var(--text-muted);
      margin: 0 8px;
    }
    .breadcrumb-current {
      color: var(--text);
      font-weight: 600;
    }

    /* Hero Section */
    .course-hero {
      position: relative;
      height: 320px;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 24px;
      box-shadow: 0 8px 32px rgba(61, 41, 20, 0.15);
    }
    .course-hero img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .course-hero-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.2) 50%, transparent 100%);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 32px;
    }
    .course-hero-content h1 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 2.5rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 8px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    .course-hero-content .location {
      font-size: 1.1rem;
      color: rgba(255,255,255,0.9);
      font-style: italic;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .course-hero-content .location svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
    }

    /* Staff Pick Badge */
    .staff-pick-badge {
      position: absolute;
      top: 20px;
      left: 20px;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: linear-gradient(135deg, var(--gold), #92650a);
      border-radius: 8px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 0.8rem;
      font-weight: 700;
      color: #FFFFFF;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      box-shadow: 0 2px 12px rgba(184, 134, 11, 0.5);
    }
    .staff-pick-badge svg {
      width: 14px;
      height: 14px;
      fill: #FFFFFF;
    }

    /* Favorite Button */
    .fav-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: none;
      background: rgba(255,255,255,0.95);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      box-shadow: 0 2px 12px rgba(0,0,0,0.2);
    }
    .fav-btn:hover { transform: scale(1.1); }
    .fav-btn svg { transition: all 0.2s; }
    .fav-btn.favorited { background: #fce4ec; }
    .fav-btn.favorited svg { fill: #e91e63; stroke: #e91e63; }

    /* Main Content Grid */
    .course-content {
      display: grid;
      grid-template-columns: 1fr 340px;
      gap: 24px;
      margin-bottom: 48px;
    }

    /* Course Stats Card */
    .course-stats-card {
      background: var(--card-bg);
      border-radius: 12px;
      border: 2px solid var(--border-light);
      padding: 24px;
      box-shadow: 0 4px 16px rgba(61, 41, 20, 0.08);
    }
    .course-stats-card h2 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 2px solid var(--border-light);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 24px;
    }
    .stat-item {
      text-align: center;
      padding: 16px 12px;
      background: var(--bg-paper);
      border-radius: 8px;
      border: 1px solid var(--border-light);
    }
    .stat-value {
      font-family: 'DM Mono', monospace;
      font-size: 1.8rem;
      font-weight: 600;
      color: var(--primary);
      display: block;
    }
    .stat-label {
      font-size: 0.85rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-top: 4px;
    }

    /* Course Info List */
    .course-info-list {
      list-style: none;
    }
    .course-info-list li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 0;
      border-bottom: 1px solid var(--border-light);
    }
    .course-info-list li:last-child {
      border-bottom: none;
    }
    .course-info-list .label {
      color: var(--text-muted);
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .course-info-list .label svg {
      width: 18px;
      height: 18px;
      stroke: var(--text-muted);
    }
    .course-info-list .value {
      font-weight: 600;
      color: var(--text);
    }
    .course-info-list .value a {
      color: var(--primary);
      text-decoration: none;
    }
    .course-info-list .value a:hover {
      text-decoration: underline;
    }

    /* Difficulty Badge */
    .difficulty-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    .difficulty-badge.easy { border: 1px solid #10B981; color: #059669; background: #ecfdf5; }
    .difficulty-badge.moderate { border: 1px solid #F59E0B; color: #D97706; background: #fffbeb; }
    .difficulty-badge.challenging { border: 1px solid #EF4444; color: #DC2626; background: #fef2f2; }

    /* Tee Times Widget */
    .tee-times-widget {
      background: var(--card-bg);
      border-radius: 12px;
      border: 2px solid var(--border-light);
      padding: 24px;
      box-shadow: 0 4px 16px rgba(61, 41, 20, 0.08);
    }
    .tee-times-widget h2 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .live-indicator {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.75rem;
      font-weight: 500;
      color: var(--success-dark);
      background: #ecfdf5;
      padding: 4px 10px;
      border-radius: 20px;
    }
    .live-dot {
      width: 8px;
      height: 8px;
      background: var(--success);
      border-radius: 50%;
      animation: pulse-live 2s infinite;
    }
    @keyframes pulse-live {
      0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
      50% { opacity: 0.8; box-shadow: 0 0 0 6px rgba(16, 185, 129, 0); }
    }

    /* Date Picker */
    .date-picker {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      overflow-x: auto;
      padding-bottom: 4px;
    }
    .date-btn {
      flex: 1;
      min-width: 60px;
      padding: 10px 8px;
      border: 2px solid var(--border-light);
      border-radius: 8px;
      background: var(--bg-paper);
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
      font-family: inherit;
    }
    .date-btn:hover { border-color: var(--primary); }
    .date-btn.active {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary-dark);
    }
    .date-btn .day-name {
      font-size: 0.7rem;
      text-transform: uppercase;
      opacity: 0.8;
    }
    .date-btn .day-num {
      font-size: 1.1rem;
      font-weight: 700;
    }

    /* Tee Time Slots */
    .tee-time-slots {
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 320px;
      overflow-y: auto;
      padding-right: 8px;
    }
    .tee-time-slot {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      background: var(--bg-paper);
      border: 2px solid var(--border-light);
      border-radius: 8px;
      transition: all 0.2s;
    }
    .tee-time-slot:hover {
      border-color: var(--primary);
      transform: translateX(4px);
    }
    .slot-time {
      font-family: 'DM Mono', monospace;
      font-size: 1.1rem;
      font-weight: 500;
      color: var(--text);
    }
    .slot-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .slot-players {
      font-size: 0.85rem;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .slot-price {
      font-family: 'DM Mono', monospace;
      font-weight: 600;
      color: var(--primary);
    }
    .slot-book-btn {
      padding: 8px 16px;
      background: linear-gradient(135deg, var(--success), var(--success-dark));
      color: #fff;
      border: none;
      border-radius: 6px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
    }
    .slot-book-btn:hover {
      background: linear-gradient(135deg, var(--success-dark), #047857);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .no-times {
      text-align: center;
      padding: 32px 20px;
      color: var(--text-muted);
    }
    .no-times p { margin-bottom: 16px; }

    .loading-slots {
      text-align: center;
      padding: 40px 20px;
    }
    .loading-spinner {
      width: 32px;
      height: 32px;
      border: 3px solid var(--border-light);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 12px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Book Now CTA */
    .book-now-section {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid var(--border-light);
    }
    .btn-book-now {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      width: 100%;
      padding: 16px 24px;
      background: linear-gradient(135deg, var(--success), var(--success-dark));
      color: #fff;
      border: none;
      border-radius: 10px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      box-shadow: 0 4px 16px rgba(16, 185, 129, 0.35);
    }
    .btn-book-now:hover {
      background: linear-gradient(135deg, var(--success-dark), #047857);
      transform: translateY(-2px);
      box-shadow: 0 6px 24px rgba(16, 185, 129, 0.45);
    }
    .btn-book-now svg {
      width: 20px;
      height: 20px;
    }

    /* Call Button */
    .btn-call {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      padding: 14px 24px;
      background: var(--bg-paper);
      color: var(--text);
      border: 2px solid var(--border);
      border-radius: 10px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      margin-top: 12px;
    }
    .btn-call:hover {
      border-color: var(--primary);
      background: #e8efe6;
    }

    /* Map Section */
    .map-section {
      background: var(--card-bg);
      border-radius: 12px;
      border: 2px solid var(--border-light);
      overflow: hidden;
      box-shadow: 0 4px 16px rgba(61, 41, 20, 0.08);
    }
    .map-container {
      height: 300px;
      background: var(--bg-paper);
      position: relative;
    }
    .map-container iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    .map-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: var(--text-muted);
      flex-direction: column;
      gap: 12px;
    }
    .map-placeholder svg {
      width: 48px;
      height: 48px;
      stroke: var(--border);
    }
    .map-info {
      padding: 16px 20px;
      border-top: 2px solid var(--border-light);
    }
    .map-info .address {
      font-size: 0.95rem;
      color: var(--text);
      margin-bottom: 8px;
    }
    .map-info .directions-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
    }
    .map-info .directions-link:hover {
      text-decoration: underline;
    }

    /* Course Description */
    .course-description {
      background: var(--card-bg);
      border-radius: 12px;
      border: 2px solid var(--border-light);
      padding: 24px;
      margin-top: 24px;
      box-shadow: 0 4px 16px rgba(61, 41, 20, 0.08);
    }
    .course-description h2 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 16px;
    }
    .course-description p {
      color: var(--text);
      line-height: 1.8;
      margin-bottom: 16px;
    }
    .course-description p:last-child {
      margin-bottom: 0;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 48px 20px;
      color: var(--text-muted);
      font-size: 0.9rem;
      background: var(--card-bg);
      border-top: 4px solid var(--border);
      margin-top: 48px;
    }
    footer .footer-content { max-width: 600px; margin: 0 auto; }
    footer .footer-content p { margin: 10px 0; }
    footer .footer-content strong { font-family: 'Playfair Display', Georgia, serif; font-size: 1.1rem; }
    footer .footer-links { margin-top: 16px; }
    footer .footer-links a {
      color: var(--text-muted);
      text-decoration: none;
      margin: 0 12px;
    }
    footer .footer-links a:hover { color: var(--primary); }
    footer .footer-copy { font-size: 0.8rem; margin-top: 20px !important; }

    /* Mobile Responsive */
    @media (max-width: 900px) {
      .course-content {
        grid-template-columns: 1fr;
      }
      .course-hero {
        height: 260px;
        border-radius: 0;
        margin: 0 -20px 24px;
        width: calc(100% + 40px);
      }
      .course-hero-content h1 {
        font-size: 1.8rem;
      }
    }

    @media (max-width: 600px) {
      .header-content { flex-direction: column; gap: 12px; }
      header h1 { font-size: 1.2rem; }
      .header-nav { flex-wrap: wrap; justify-content: center; }
      .nav-btn { padding: 6px 10px; font-size: 0.8rem; }

      .course-hero { height: 220px; }
      .course-hero-overlay { padding: 20px; }
      .course-hero-content h1 { font-size: 1.5rem; }
      .course-hero-content .location { font-size: 0.95rem; }

      .stats-grid { grid-template-columns: repeat(3, 1fr); gap: 10px; }
      .stat-item { padding: 12px 8px; }
      .stat-value { font-size: 1.4rem; }

      .tee-time-slot {
        flex-wrap: wrap;
        gap: 10px;
      }
      .slot-info {
        width: 100%;
        justify-content: space-between;
      }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Header -->
  <header>
    <div class="container">
      <div class="header-content">
        <h1><a href="/">Golf The Bay</a></h1>
        <nav class="header-nav" aria-label="Main navigation">
          <a href="/" class="nav-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
              <polyline points="9,22 9,12 15,12 15,22"></polyline>
            </svg>
            Map
          </a>
          <a href="/app.html" class="nav-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            Tee Times
          </a>
          <a href="/courses.html" class="nav-btn active">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path>
              <line x1="4" y1="22" x2="4" y2="15"></line>
            </svg>
            Courses
          </a>
        </nav>
      </div>
    </div>
  </header>

  <main id="main-content">
    <div class="container">
      <!-- Breadcrumb -->
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <a href="/">Home</a>
        <span>/</span>
        <a href="/courses.html">Courses</a>
        <span>/</span>
        <a href="/courses.html?region={{REGION_SLUG}}">{{REGION}}</a>
        <span>/</span>
        <span class="breadcrumb-current">{{COURSE_NAME}}</span>
      </nav>

      <!-- Hero Section -->
      <section class="course-hero" aria-label="Course hero image">
        <img src="/images/courses/{{COURSE_SLUG}}.jpg" alt="Aerial view of {{COURSE_NAME}} fairways and greens in {{CITY}}, California" loading="lazy" width="1000" height="320" decoding="async" onerror="this.style.display='none'">
        <div class="course-hero-overlay">
          <!-- Staff Pick Badge (conditionally shown) -->
          <div class="staff-pick-badge" id="staff-pick-badge" style="display: none;">
            <svg viewBox="0 0 24 24"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon></svg>
            Staff Pick
          </div>

          <!-- Favorite Button -->
          <button class="fav-btn" id="fav-btn" aria-label="Add to favorites" onclick="toggleFavorite()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#e91e63" stroke-width="2">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
          </button>

          <div class="course-hero-content">
            <h1>{{COURSE_NAME}}</h1>
            <div class="location">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              {{CITY}}, California
            </div>
          </div>
        </div>
      </section>

      <!-- Main Content Grid -->
      <div class="course-content">
        <!-- Left Column - Course Info -->
        <div class="course-main">
          <!-- Course Stats -->
          <section class="course-stats-card" aria-labelledby="stats-heading">
            <h2 id="stats-heading">Course Statistics</h2>

            <div class="stats-grid">
              <div class="stat-item">
                <span class="stat-value" id="stat-holes">{{HOLES}}</span>
                <span class="stat-label">Holes</span>
              </div>
              <div class="stat-item">
                <span class="stat-value" id="stat-par">{{PAR}}</span>
                <span class="stat-label">Par</span>
              </div>
              <div class="stat-item">
                <span class="stat-value" id="stat-yardage">{{YARDAGE}}</span>
                <span class="stat-label">Yards</span>
              </div>
            </div>

            <ul class="course-info-list">
              <li>
                <span class="label">
                  <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  Region
                </span>
                <span class="value">{{REGION}}</span>
              </li>
              <li>
                <span class="label">
                  <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                  </svg>
                  Phone
                </span>
                <span class="value"><a href="tel:{{PHONE_NUMBER}}">{{PHONE_NUMBER}}</a></span>
              </li>
              <li>
                <span class="label">
                  <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12,6 12,12 16,14"></polyline>
                  </svg>
                  Booking System
                </span>
                <span class="value" id="booking-system">{{BOOKING_SYSTEM}}</span>
              </li>
              <li>
                <span class="label">
                  <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon>
                  </svg>
                  Difficulty
                </span>
                <span class="value">
                  <span class="difficulty-badge moderate" id="difficulty-badge">Moderate</span>
                </span>
              </li>
            </ul>
          </section>

          <!-- Map Section -->
          <section class="map-section" aria-labelledby="map-heading">
            <h2 id="map-heading" class="visually-hidden">Course Location</h2>
            <div class="map-container" id="map-container">
              <!-- Google Maps embed or placeholder -->
              <div class="map-placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                  <circle cx="12" cy="10" r="3"></circle>
                </svg>
                <span>Map loading...</span>
              </div>
            </div>
            <div class="map-info">
              <div class="address" id="course-address">{{CITY}}, California</div>
              <a href="https://www.google.com/maps/dir/?api=1&destination={{LATITUDE}},{{LONGITUDE}}" target="_blank" rel="noopener noreferrer" class="directions-link">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="3,11 22,2 13,21 11,13"></polygon>
                </svg>
                Get Directions
              </a>
            </div>
          </section>

          <!-- Course Description -->
          <section class="course-description" aria-labelledby="description-heading">
            <h2 id="description-heading">About {{COURSE_NAME}}</h2>
            <p id="course-description-text">
              {{COURSE_NAME}} is a beautiful {{HOLES}}-hole golf course located in {{CITY}}, California.
              Playing at {{YARDAGE}} yards with a par of {{PAR}}, this course offers a great experience
              for golfers of all skill levels in the {{REGION}} region.
            </p>
            <p>
              Book your tee time online and enjoy one of the best public golf courses in the Bay Area.
              With convenient online booking and competitive rates, {{COURSE_NAME}} is a popular choice
              for both local golfers and visitors alike.
            </p>
          </section>
        </div>

        <!-- Right Column - Tee Times Widget -->
        <aside class="course-sidebar">
          <div class="tee-times-widget" aria-labelledby="tee-times-heading">
            <h2 id="tee-times-heading">
              Available Tee Times
              <span class="live-indicator">
                <span class="live-dot"></span>
                Live
              </span>
            </h2>

            <!-- Date Picker -->
            <div class="date-picker" role="tablist" aria-label="Select date">
              <!-- Dates populated via JavaScript -->
            </div>

            <!-- Tee Time Slots -->
            <div class="tee-time-slots" id="tee-time-slots" role="list" aria-label="Available tee times">
              <div class="loading-slots">
                <div class="loading-spinner"></div>
                <p>Loading tee times...</p>
              </div>
            </div>

            <!-- Book Now CTA -->
            <div class="book-now-section">
              <a href="{{BOOKING_URL}}" target="_blank" rel="noopener noreferrer" class="btn-book-now" id="book-now-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                Book on Official Site
              </a>
              <a href="tel:{{PHONE_NUMBER}}" class="btn-call">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
                Call to Book: {{PHONE_NUMBER}}
              </a>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <p><strong>Golf The Bay</strong></p>
      <p>Find and book the best tee times across 80+ public golf courses in the San Francisco Bay Area.</p>
      <div class="footer-links">
        <a href="/">Map</a>
        <a href="/app.html">Tee Times</a>
        <a href="/courses.html">All Courses</a>
      </div>
      <p class="footer-copy">&copy; 2025 Golf The Bay. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Course data - would be populated server-side or via API
    const courseData = {
      id: '{{COURSE_ID}}',
      name: '{{COURSE_NAME}}',
      slug: '{{COURSE_SLUG}}',
      city: '{{CITY}}',
      region: '{{REGION}}',
      holes: {{HOLES}},
      par: {{PAR}},
      yardage: {{YARDAGE}},
      latitude: {{LATITUDE}},
      longitude: {{LONGITUDE}},
      phone: '{{PHONE_NUMBER}}',
      bookingUrl: '{{BOOKING_URL}}',
      bookingSystem: '{{BOOKING_SYSTEM}}',
      isStaffPick: {{IS_STAFF_PICK}}
    };

    const API_BASE = '/api';

    // Initialize page
    document.addEventListener('DOMContentLoaded', () => {
      initializeDatePicker();
      loadTeeTimes();
      initializeMap();
      initializeFavorites();
      updateStaffPickBadge();
    });

    // Date picker initialization
    function initializeDatePicker() {
      const datePicker = document.querySelector('.date-picker');
      const today = new Date();

      for (let i = 0; i < 7; i++) {
        const date = new Date(today);
        date.setDate(today.getDate() + i);

        const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        const dayName = dayNames[date.getDay()];
        const dayNum = date.getDate();
        const dateStr = date.toISOString().split('T')[0];

        const btn = document.createElement('button');
        btn.className = `date-btn${i === 0 ? ' active' : ''}`;
        btn.setAttribute('role', 'tab');
        btn.setAttribute('aria-selected', i === 0 ? 'true' : 'false');
        btn.setAttribute('data-date', dateStr);
        btn.innerHTML = `
          <div class="day-name">${i === 0 ? 'Today' : dayName}</div>
          <div class="day-num">${dayNum}</div>
        `;
        btn.onclick = () => selectDate(btn, dateStr);
        datePicker.appendChild(btn);
      }
    }

    function selectDate(btn, dateStr) {
      document.querySelectorAll('.date-btn').forEach(b => {
        b.classList.remove('active');
        b.setAttribute('aria-selected', 'false');
      });
      btn.classList.add('active');
      btn.setAttribute('aria-selected', 'true');
      loadTeeTimes(dateStr);
    }

    // Load tee times from API
    async function loadTeeTimes(date) {
      const slotsContainer = document.getElementById('tee-time-slots');
      slotsContainer.innerHTML = `
        <div class="loading-slots">
          <div class="loading-spinner"></div>
          <p>Loading tee times...</p>
        </div>
      `;

      if (!date) {
        date = new Date().toISOString().split('T')[0];
      }

      try {
        const params = new URLSearchParams({
          course_id: courseData.id,
          date: date,
          limit: 20
        });

        const response = await fetch(`${API_BASE}/tee-times?${params}`);
        if (!response.ok) throw new Error('Failed to load tee times');

        const teeTimes = await response.json();

        if (teeTimes.length === 0) {
          slotsContainer.innerHTML = `
            <div class="no-times">
              <p>No tee times available for this date.</p>
              <a href="${courseData.bookingUrl}" target="_blank" rel="noopener noreferrer" class="slot-book-btn">
                Check Official Site
              </a>
            </div>
          `;
          return;
        }

        slotsContainer.innerHTML = teeTimes.map(tt => `
          <div class="tee-time-slot" role="listitem">
            <span class="slot-time">${formatTime(tt.time)}</span>
            <div class="slot-info">
              <span class="slot-players">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                </svg>
                ${tt.players || '1-4'} players
              </span>
              <span class="slot-price">$${tt.price}</span>
            </div>
            <a href="${tt.booking_url || courseData.bookingUrl}" target="_blank" rel="noopener noreferrer" class="slot-book-btn">
              Book
            </a>
          </div>
        `).join('');

      } catch (error) {
        console.error('Error loading tee times:', error);
        slotsContainer.innerHTML = `
          <div class="no-times">
            <p>Unable to load tee times. Please try again.</p>
            <a href="${courseData.bookingUrl}" target="_blank" rel="noopener noreferrer" class="slot-book-btn">
              Book on Official Site
            </a>
          </div>
        `;
      }
    }

    function formatTime(timeStr) {
      const [hours, minutes] = timeStr.split(':');
      const h = parseInt(hours);
      const ampm = h >= 12 ? 'PM' : 'AM';
      const hour12 = h % 12 || 12;
      return `${hour12}:${minutes} ${ampm}`;
    }

    // Map initialization
    function initializeMap() {
      const mapContainer = document.getElementById('map-container');
      const lat = courseData.latitude;
      const lng = courseData.longitude;

      if (lat && lng) {
        // Using OpenStreetMap embed (free, no API key required)
        mapContainer.innerHTML = `
          <iframe
            src="https://www.openstreetmap.org/export/embed.html?bbox=${lng-0.01},${lat-0.01},${lng+0.01},${lat+0.01}&layer=mapnik&marker=${lat},${lng}"
            loading="lazy"
            title="Map showing location of ${courseData.name}"
          ></iframe>
        `;
      }
    }

    // Favorites management
    function getFavorites() {
      try {
        return JSON.parse(localStorage.getItem('golfFavorites') || '[]');
      } catch (e) { return []; }
    }

    function saveFavorites(favorites) {
      localStorage.setItem('golfFavorites', JSON.stringify(favorites));
    }

    function isFavorite() {
      return getFavorites().includes(courseData.id);
    }

    function initializeFavorites() {
      updateFavoriteButton();
    }

    function toggleFavorite() {
      const favorites = getFavorites();
      const index = favorites.indexOf(courseData.id);

      if (index > -1) {
        favorites.splice(index, 1);
      } else {
        favorites.push(courseData.id);
      }

      saveFavorites(favorites);
      updateFavoriteButton();
    }

    function updateFavoriteButton() {
      const btn = document.getElementById('fav-btn');
      if (isFavorite()) {
        btn.classList.add('favorited');
        btn.setAttribute('aria-label', 'Remove from favorites');
      } else {
        btn.classList.remove('favorited');
        btn.setAttribute('aria-label', 'Add to favorites');
      }
    }

    // Staff pick badge
    function updateStaffPickBadge() {
      if (courseData.isStaffPick) {
        document.getElementById('staff-pick-badge').style.display = 'flex';
      }
    }
  </script>
</body>
</html>
