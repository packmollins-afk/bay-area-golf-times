<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <!-- Primary Meta Tags -->
  <title>Bay Area Golf - Compare Tee Times & Prices | 80+ Courses</title>
  <meta name="title" content="Bay Area Golf - Compare Tee Times & Prices | 80+ Courses">
  <meta name="description" content="Find the best tee times across San Francisco, East Bay, South Bay, North Bay, and Monterey. Compare prices from 80+ courses. Live availability.">
  <meta name="keywords" content="bay area golf, golf courses san francisco, public golf bay area, tee times sf, golf near me, bay area golf map, san francisco golf, east bay golf, south bay golf, north bay golf">
  <meta name="author" content="Bay Area Golf">
  <meta name="robots" content="index, follow">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://bayareagolf.now/">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://bayareagolf.now/">
  <meta property="og:title" content="Bay Area Golf - Compare Tee Times & Prices | 80+ Courses">
  <meta property="og:description" content="Find the best tee times across San Francisco, East Bay, South Bay, North Bay, and Monterey. Compare prices from 80+ courses. Live availability.">
  <meta property="og:image" content="https://bayareagolf.now/og-image.svg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Bay Area Golf">
  <meta property="og:locale" content="en_US">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://bayareagolf.now/">
  <meta name="twitter:title" content="Bay Area Golf - Compare Tee Times & Prices | 80+ Courses">
  <meta name="twitter:description" content="Find the best tee times across San Francisco, East Bay, South Bay, North Bay, and Monterey. Compare prices from 80+ courses.">
  <meta name="twitter:image" content="https://bayareagolf.now/og-image.svg">

  <!-- Geo Meta Tags for Local SEO -->
  <meta name="geo.region" content="US-CA">
  <meta name="geo.placename" content="San Francisco Bay Area">
  <meta name="geo.position" content="37.7749;-122.4194">
  <meta name="ICBM" content="37.7749, -122.4194">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <meta name="theme-color" content="#2d5a27">

  <!-- PWA / iOS App -->
  <link rel="manifest" href="/manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Bay Area Golf">
  <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png">

  <!-- Performance: Non-blocking Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap"></noscript>

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Bay Area Golf",
    "url": "https://bayareagolf.now",
    "description": "Find the best tee times across San Francisco, East Bay, South Bay, North Bay, and Monterey. Compare prices from 80+ courses.",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://bayareagolf.now/courses.html?search={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Bay Area Golf",
    "url": "https://bayareagolf.now",
    "logo": "https://bayareagolf.now/favicon.svg",
    "description": "Compare tee times and prices from 80+ golf courses across San Francisco Bay Area",
    "areaServed": {
      "@type": "GeoCircle",
      "geoMidpoint": {
        "@type": "GeoCoordinates",
        "latitude": 37.7749,
        "longitude": -122.4194
      },
      "geoRadius": "80000"
    },
    "sameAs": []
  }
  </script>
  <style>
    /* Fonts loaded via non-blocking link tags above */
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --paper: #f4ebe0;
      --paper-dark: #e8dcc8;
      --contour: #8b7355;
      --contour-light: rgba(139, 115, 85, 0.3);
      --water: #a8c5d8;
      --water-dark: #7ba3bd;
      --fairway: #5a8f4a;
      --fairway-light: #7cb86a;
      --text-dark: #3d3225;
      --text-muted: #6b5d4d;
      --accent: #c4553a;
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: 'Source Serif 4', Georgia, serif;
      background: var(--paper);
      color: var(--text-dark);
    }

    .map-container {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: hidden;
      background: var(--paper);
    }

    /* Draggable map content - larger than viewport */
    .map-content {
      position: absolute;
      width: 200%;
      height: 200%;
      left: -50%;
      top: -50%;
      cursor: grab;
      transition: none;
      user-select: none;
    }

    .map-content:active {
      cursor: grabbing;
    }

    .map-content.dragging {
      cursor: grabbing;
    }

    /* Aged paper texture */
    .paper-texture {
      position: absolute;
      inset: 0;
      background:
        /* Paper grain */
        url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"),
        /* Aged spots */
        radial-gradient(ellipse at 20% 30%, rgba(139, 115, 85, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 70%, rgba(139, 115, 85, 0.06) 0%, transparent 40%),
        radial-gradient(ellipse at 60% 20%, rgba(139, 115, 85, 0.05) 0%, transparent 35%),
        /* Base paper color */
        linear-gradient(180deg, #f6efe4 0%, #f4ebe0 50%, #efe5d8 100%);
      opacity: 0.4;
      pointer-events: none;
    }

    /* USGS-style grid */
    .map-grid {
      position: absolute;
      inset: 0;
      background:
        linear-gradient(rgba(139, 115, 85, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(139, 115, 85, 0.1) 1px, transparent 1px);
      background-size: 50px 50px;
      pointer-events: none;
    }

    /* Contour lines layer */
    .contour-lines {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    /* Individual contour shapes */
    .contour {
      position: absolute;
      border: 1px solid var(--contour-light);
      border-radius: 50%;
    }

    /* SF Peninsula contours - runs north-south along coast */
    .contour-sf-1 { top: 22%; left: 16%; width: 18%; height: 35%; transform: rotate(-10deg); }
    .contour-sf-2 { top: 28%; left: 18%; width: 14%; height: 26%; transform: rotate(-10deg); }
    .contour-sf-3 { top: 34%; left: 20%; width: 10%; height: 18%; transform: rotate(-10deg); }

    /* East Bay hills contours */
    .contour-eb-1 { top: 20%; left: 58%; width: 32%; height: 50%; transform: rotate(5deg); border-radius: 60% 40% 50% 50%; }
    .contour-eb-2 { top: 26%; left: 62%; width: 24%; height: 40%; transform: rotate(5deg); border-radius: 60% 40% 50% 50%; }
    .contour-eb-3 { top: 32%; left: 66%; width: 18%; height: 30%; transform: rotate(5deg); border-radius: 60% 40% 50% 50%; }

    /* North Bay (Marin headlands) contours */
    .contour-ma-1 { top: 4%; left: 26%; width: 20%; height: 20%; transform: rotate(-15deg); border-radius: 45% 55% 50% 50%; }
    .contour-ma-2 { top: 8%; left: 30%; width: 14%; height: 14%; transform: rotate(-15deg); border-radius: 45% 55% 50% 50%; }

    /* South Bay / Santa Cruz Mtns contours */
    .contour-sb-1 { top: 60%; left: 22%; width: 35%; height: 38%; transform: rotate(12deg); border-radius: 50% 50% 60% 40%; }
    .contour-sb-2 { top: 68%; left: 28%; width: 26%; height: 28%; transform: rotate(12deg); border-radius: 50% 50% 60% 40%; }

    /* San Francisco Bay - GPS-based positioning */
    /* Bay center: ~37.55, -122.15 -> top: 55.9%, left: 61.8% */
    .bay-water {
      position: absolute;
      top: 42%;
      left: 50%;
      width: 12%;
      height: 22%;
      background: var(--water);
      border-radius: 45% 55% 30% 20% / 25% 30% 70% 75%;
      transform: rotate(-5deg);
      box-shadow: inset 0 0 30px rgba(123, 163, 189, 0.5);
    }

    /* South Bay extension - goes toward San Jose */
    .south-bay {
      position: absolute;
      top: 55%;
      left: 58%;
      width: 8%;
      height: 18%;
      background: var(--water);
      border-radius: 50% 50% 30% 30%;
      transform: rotate(15deg);
      box-shadow: inset 0 0 20px rgba(123, 163, 189, 0.4);
    }

    /* San Pablo Bay (north of main bay): ~38.0, -122.4 */
    .san-pablo-bay {
      position: absolute;
      top: 28%;
      left: 46%;
      width: 7%;
      height: 6%;
      background: var(--water);
      border-radius: 60% 40% 50% 50%;
      box-shadow: inset 0 0 15px rgba(123, 163, 189, 0.4);
    }

    /* Golden Gate strait: ~37.82, -122.47 - where Pacific meets SF Bay */
    .golden-gate-strait {
      position: absolute;
      top: 37%;
      left: 34%;
      width: 10%;
      height: 4%;
      background: linear-gradient(90deg, var(--water) 0%, var(--water-dark) 50%, var(--water) 100%);
      transform: rotate(-5deg);
      border-radius: 0 50% 50% 0;
      box-shadow: inset 0 0 15px rgba(123, 163, 189, 0.6);
    }

    /* California Coastline - SVG-based accurate coast */
    .california-coast {
      position: absolute;
      top: -20%;
      left: 0;
      width: 100%;
      height: 140%;
      pointer-events: none;
    }

    .california-coast svg {
      width: 100%;
      height: 100%;
    }

    /* Tomales Bay - long narrow inlet between Pt Reyes and mainland */
    .tomales-bay {
      position: absolute;
      top: 16%;
      left: 22%;
      width: 0.6%;
      height: 7%;
      background: var(--water);
      border-radius: 40% 40% 50% 50%;
      transform: rotate(-25deg);
      box-shadow: inset 0 0 8px rgba(123, 163, 189, 0.5);
    }

    /* Drakes Bay - inside Point Reyes peninsula */
    .drakes-bay {
      position: absolute;
      top: 28%;
      left: 14%;
      width: 4%;
      height: 2.5%;
      background: var(--water);
      border-radius: 0 60% 60% 40%;
      transform: rotate(-10deg);
      opacity: 0.8;
    }

    /* Bodega Bay - small harbor inlet */
    .bodega-bay {
      position: absolute;
      top: 9%;
      left: 22%;
      width: 2%;
      height: 1.5%;
      background: var(--water);
      border-radius: 60% 40% 50% 50%;
      transform: rotate(-20deg);
      box-shadow: inset 0 0 6px rgba(123, 163, 189, 0.4);
    }

    /* Half Moon Bay - coastal indent */
    .half-moon-bay-water {
      position: absolute;
      top: 63%;
      left: 19%;
      width: 2.5%;
      height: 2%;
      background: var(--water);
      border-radius: 50% 50% 60% 40%;
      opacity: 0.7;
    }

    /* Monterey Bay - large curved bay */
    .monterey-bay {
      position: absolute;
      top: 88%;
      left: 30%;
      width: 26%;
      height: 12%;
      background: var(--water);
      border-radius: 50% 50% 0 0;
      box-shadow: inset 0 0 30px rgba(123, 163, 189, 0.4);
    }

    /* Sacramento River Delta: ~38.05, -121.7 */
    .sac-delta {
      position: absolute;
      top: 25%;
      left: 85%;
      width: 8%;
      height: 10%;
      background: var(--water);
      border-radius: 40% 60% 50% 50%;
      opacity: 0.6;
      box-shadow: inset 0 0 15px rgba(123, 163, 189, 0.3);
    }

    /* Golf course fairway shapes */
    .fairways {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .fairway {
      position: absolute;
      background: var(--fairway);
      box-shadow: 0 0 8px rgba(90, 143, 74, 0.4);
      cursor: pointer;
      pointer-events: auto;
      transition: all 0.3s ease;
    }

    .fairway:hover {
      background: var(--fairway-light);
      box-shadow: 0 0 15px rgba(90, 143, 74, 0.7);
      z-index: 100;
      filter: brightness(1.2);
    }

    a.fairway {
      text-decoration: none;
    }

    .fairway::before {
      content: attr(data-course);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(-5px);
      background: rgba(61, 50, 37, 0.95);
      color: var(--paper);
      padding: 6px 10px;
      border-radius: 4px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 0.7rem;
      font-weight: 600;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
      pointer-events: none;
      z-index: 200;
    }

    .fairway:hover::before {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(-10px);
    }

    /* Small course initial inside fairway */
    .fairway::after {
      content: attr(data-initial);
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 10px;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.95);
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      pointer-events: none;
    }

    /* SF Courses - Based on GPS coordinates */
    /* TPC Harding Park: 37.724, -122.493 */
    .fw-harding { top: 45.6%; left: 41.6%; width: 28px; height: 42px; border-radius: 40% 60% 55% 45%; transform: rotate(-30deg); }
    /* Lincoln Park: 37.784, -122.499 */
    .fw-lincoln { top: 42.1%; left: 41.2%; width: 22px; height: 32px; border-radius: 50% 50% 45% 55%; transform: rotate(-25deg); }
    /* Presidio: 37.790, -122.466 */
    .fw-presidio { top: 41.7%; left: 43.2%; width: 24px; height: 36px; border-radius: 45% 55% 50% 50%; transform: rotate(-15deg); }
    /* Sharp Park (Pacifica): 37.624, -122.491 */
    .fw-sharp { top: 51.5%; left: 41.7%; width: 24px; height: 38px; border-radius: 55% 45% 50% 50%; transform: rotate(-25deg); }
    /* Golden Gate Park: 37.770, -122.490 */
    .fw-gleneagles { top: 42.9%; left: 41.8%; width: 18px; height: 28px; border-radius: 50%; transform: rotate(-20deg); }
    /* Olympic Club area: 37.71, -122.50 */
    .fw-olympic { top: 46.5%; left: 41.2%; width: 22px; height: 34px; border-radius: 48% 52% 50% 50%; transform: rotate(-40deg); }

    /* South Bay Courses - Based on GPS */
    /* Palo Alto: 37.42, -122.11 */
    .fw-paloalto { top: 63.5%; left: 64.1%; width: 24px; height: 38px; border-radius: 45% 55% 52% 48%; transform: rotate(10deg); }
    /* Baylands: 37.43, -122.10 */
    .fw-baylands { top: 62.9%; left: 64.7%; width: 22px; height: 34px; border-radius: 50% 50% 48% 52%; transform: rotate(5deg); }
    /* Santa Teresa: 37.221, -121.777 */
    .fw-santateresa { top: 75.2%; left: 83.7%; width: 24px; height: 40px; border-radius: 50% 50% 55% 45%; transform: rotate(25deg); }
    /* Cinnabar Hills: 37.161, -121.751 */
    .fw-cinnabar { top: 78.8%; left: 85.2%; width: 28px; height: 44px; border-radius: 48% 52% 50% 50%; transform: rotate(15deg); }
    /* Coyote Creek: 37.24, -121.76 */
    .fw-coyote { top: 74.1%; left: 84.7%; width: 24px; height: 38px; border-radius: 52% 48% 50% 50%; transform: rotate(20deg); }
    /* Sunnyvale: 37.39, -122.04 */
    .fw-sunnyvale { top: 65.3%; left: 68.2%; width: 20px; height: 30px; border-radius: 50%; transform: rotate(5deg); }
    /* Deep Cliff: 37.33, -122.01 */
    .fw-deepcliff { top: 68.8%; left: 70.0%; width: 18px; height: 28px; border-radius: 50%; transform: rotate(-5deg); }
    /* San Jose Muni: 37.32, -121.86 */
    .fw-sanjose { top: 69.4%; left: 78.8%; width: 22px; height: 34px; border-radius: 50%; transform: rotate(12deg); }

    /* East Bay Courses - Based on GPS */
    /* Corica Park South: 37.739, -122.233 - offset to avoid overlap with North */
    .fw-corica { top: 45.8%; left: 57.5%; width: 28px; height: 44px; border-radius: 50% 50% 55% 45%; transform: rotate(-10deg); }
    /* Tilden Park: 37.888, -122.244 */
    .fw-tilden { top: 36.0%; left: 56.2%; width: 24px; height: 38px; border-radius: 45% 55% 50% 50%; transform: rotate(-5deg); }
    /* Boundary Oak: 37.924, -121.999 */
    .fw-boundary { top: 33.9%; left: 70.6%; width: 24px; height: 38px; border-radius: 52% 48% 50% 50%; transform: rotate(8deg); }
    /* Metropolitan: 37.72, -122.20 */
    .fw-metropolitan { top: 45.9%; left: 58.8%; width: 22px; height: 34px; border-radius: 50%; transform: rotate(-15deg); }
    /* Lake Chabot: 37.72, -122.08 */
    .fw-lakechabot { top: 45.9%; left: 65.9%; width: 24px; height: 34px; border-radius: 48% 52% 55% 45%; transform: rotate(5deg); }
    /* Poppy Ridge: 37.652, -121.682 */
    .fw-poppy { top: 49.9%; left: 89.3%; width: 24px; height: 38px; border-radius: 50% 50% 52% 48%; transform: rotate(12deg); }
    /* Las Positas: 37.68, -121.76 */
    .fw-laspositas { top: 48.2%; left: 84.7%; width: 22px; height: 32px; border-radius: 50%; transform: rotate(18deg); }
    /* Wente Vineyards: 37.63, -121.72 */
    .fw-wente { top: 51.2%; left: 87.1%; width: 20px; height: 30px; border-radius: 50%; transform: rotate(15deg); }
    /* Diablo Creek: 37.95, -121.95 */
    .fw-diablo { top: 32.4%; left: 73.5%; width: 20px; height: 30px; border-radius: 50%; transform: rotate(-8deg); }

    /* North Bay Courses - Based on GPS */
    /* Peacock Gap: 37.99, -122.47 */
    .fw-peacock { top: 30.0%; left: 42.9%; width: 24px; height: 38px; border-radius: 48% 52% 50% 50%; transform: rotate(-25deg); }
    /* Indian Valley: 37.98, -122.54 */
    .fw-indian { top: 30.6%; left: 38.8%; width: 22px; height: 34px; border-radius: 50% 50% 45% 55%; transform: rotate(-20deg); }
    /* StoneTree: 38.00, -122.51 */
    .fw-stonetree { top: 29.4%; left: 40.6%; width: 20px; height: 30px; border-radius: 50%; transform: rotate(-15deg); }
    /* Mill Valley: 37.90, -122.54 */
    .fw-millvalley { top: 33%; left: 32%; width: 18px; height: 26px; border-radius: 50%; transform: rotate(-30deg); }
    /* Bodega Harbour: 38.314, -123.017 */
    .fw-bodega { top: 9%; left: 24%; width: 24px; height: 38px; border-radius: 45% 55% 52% 48%; transform: rotate(-35deg); }
    /* Sonoma County */
    .fw-bennettvalley { top: 6%; left: 40%; width: 24px; height: 36px; border-radius: 50%; transform: rotate(-15deg); }
    .fw-windsor { top: 3%; left: 34%; width: 22px; height: 34px; border-radius: 50%; transform: rotate(-20deg); }
    .fw-valleymoon { top: 8%; left: 44%; width: 22px; height: 34px; border-radius: 50%; transform: rotate(-10deg); }
    .fw-sonomagc { top: 18%; left: 48%; width: 24px; height: 36px; border-radius: 50%; transform: rotate(-8deg); }
    .fw-fairgrounds { top: 4%; left: 28%; width: 16px; height: 24px; border-radius: 50%; transform: rotate(-25deg); }
    .fw-oakmont { top: 5%; left: 46%; width: 20px; height: 30px; border-radius: 50%; transform: rotate(-12deg); }
    /* Northwood: 38.43, -122.98 */
    .fw-northwood { top: 3%; left: 26%; width: 22px; height: 32px; border-radius: 50% 50% 45% 55%; transform: rotate(-40deg); }

    /* Additional SF/Peninsula Courses - Based on GPS */
    /* Fleming 9 (same location as Harding): 37.724, -122.493 - offset from Harding to avoid overlap */
    .fw-fleming { top: 47.5%; left: 42.8%; width: 18px; height: 28px; border-radius: 50%; transform: rotate(-28deg); }
    /* Crystal Springs: 37.519, -122.365 */
    .fw-crystal { top: 57.7%; left: 49.1%; width: 24px; height: 38px; border-radius: 48% 52% 50% 50%; transform: rotate(-12deg); }
    /* Half Moon Bay Old: 37.436, -122.441 - offset to avoid overlap with Ocean */
    .fw-hmb-old { top: 61.0%; left: 43.5%; width: 22px; height: 34px; border-radius: 50% 50% 55% 45%; transform: rotate(-20deg); }
    /* Half Moon Bay Ocean: 37.434, -122.440 - offset to avoid overlap with Old */
    .fw-hmb-ocean { top: 64.0%; left: 45.8%; width: 22px; height: 32px; border-radius: 45% 55% 50% 50%; transform: rotate(-25deg); }

    /* Pasatiempo: 37.004, -122.025 - near Santa Cruz */
    .fw-pasatiempo { top: 88.0%; left: 69.1%; width: 24px; height: 38px; border-radius: 50% 50% 55% 45%; transform: rotate(5deg); }
    /* De Laveaga: 36.9741, -122.0097 - Santa Cruz */
    .fw-delaveaga { top: 86.5%; left: 70.2%; width: 22px; height: 34px; border-radius: 50%; transform: rotate(8deg); }
    /* Seascape: 36.97, -121.91 - Aptos */
    .fw-seascape { top: 87.0%; left: 76.5%; width: 20px; height: 32px; border-radius: 50%; transform: rotate(12deg); }
    /* Pajaro Valley: 36.9136, -121.7577 - Royal Oaks */
    .fw-pajaro { top: 90.0%; left: 86.0%; width: 20px; height: 30px; border-radius: 50%; transform: rotate(15deg); }
    /* Salinas Fairways: 36.685, -121.638 - Salinas */
    .fw-salinas { top: 96.0%; left: 93.5%; width: 18px; height: 28px; border-radius: 50%; transform: rotate(20deg); }
    /* Los Lagos: 37.3055, -121.8165 - San Jose */
    .fw-loslagos { top: 70.5%; left: 81.5%; width: 20px; height: 30px; border-radius: 50%; transform: rotate(18deg); }
    /* Gilroy: 37.0058, -121.5681 - Gilroy */
    .fw-gilroy { top: 88.5%; left: 97.0%; width: 18px; height: 28px; border-radius: 50%; transform: rotate(22deg); }
    /* Rooster Run: 38.2469, -122.5897 - Petaluma */
    .fw-roosterrun { top: 14.5%; left: 34.5%; width: 22px; height: 34px; border-radius: 50%; transform: rotate(-18deg); }

    /* Corica North: 37.745, -122.235 - offset to avoid overlap with South */
    .fw-corica-n { top: 43.2%; left: 56.0%; width: 22px; height: 32px; border-radius: 50%; transform: rotate(-8deg); }

    /* Tri-Valley East Bay Courses - Based on GPS */
    /* The Bridges: 37.70, -121.91 */
    .fw-bridges { top: 47.1%; left: 75.9%; width: 24px; height: 34px; border-radius: 50% 50% 52% 48%; transform: rotate(10deg); }
    /* San Ramon: 37.77, -121.96 */
    .fw-sanramon { top: 42.9%; left: 72.9%; width: 22px; height: 32px; border-radius: 50%; transform: rotate(5deg); }
    /* Callippe Preserve: 37.66, -121.90 */
    .fw-callippe { top: 49.4%; left: 76.5%; width: 22px; height: 34px; border-radius: 48% 52% 50% 50%; transform: rotate(15deg); }
    /* Redwood Canyon: 37.81, -122.16 */
    .fw-redwood { top: 40.6%; left: 61.2%; width: 22px; height: 32px; border-radius: 50%; transform: rotate(-5deg); }

    /* McInnis - San Rafael: 38.03, -122.50 */
    .fw-mcinnis { top: 27.6%; left: 41.2%; width: 22px; height: 32px; border-radius: 50%; transform: rotate(-22deg); }

    /* Napa Valley Courses - Based on GPS */
    /* Chardonnay: 38.26, -122.22 */
    .fw-chardonnay { top: 14.1%; left: 57.6%; width: 24px; height: 34px; border-radius: 50% 50% 52% 48%; transform: rotate(-5deg); }
    /* Eagle Vines: 38.23, -122.25 */
    .fw-eaglevines { top: 15.9%; left: 55.9%; width: 22px; height: 34px; border-radius: 48% 52% 50% 50%; transform: rotate(-8deg); }
    /* Napa Kennedy: 38.27, -122.27 */
    .fw-napakennedy { top: 13.5%; left: 54.7%; width: 18px; height: 28px; border-radius: 50%; transform: rotate(-3deg); }
    /* Vintner's: 38.32, -122.35 */
    .fw-vintners { top: 10.6%; left: 50.0%; width: 18px; height: 26px; border-radius: 50%; transform: rotate(-6deg); }
    /* Silverado North: 38.350, -122.264 */
    .fw-silverado-n { top: 8.8%; left: 55.1%; width: 24px; height: 38px; border-radius: 50% 50% 55% 45%; transform: rotate(-10deg); }
    /* Silverado South: 38.35, -122.26 */
    .fw-silverado-s { top: 8.8%; left: 55.3%; width: 24px; height: 38px; border-radius: 48% 52% 50% 50%; transform: rotate(-12deg); }

    /* Price tags under fairways */
    .fairway .price-tag {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%) rotate(var(--counter-rotate, 0deg));
      background: rgba(45, 90, 39, 0.95);
      color: #fff;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 10px;
      font-weight: 700;
      white-space: nowrap;
      margin-top: 2px;
      z-index: 50;
      pointer-events: none;
      letter-spacing: -0.02em;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }
    .fairway .price-tag.loading {
      background: rgba(139, 115, 85, 0.7);
      font-size: 8px;
    }
    .fairway:hover .price-tag {
      background: rgba(45, 90, 39, 1);
      transform: translateX(-50%) rotate(var(--counter-rotate, 0deg)) scale(1.1);
    }
    /* Counter-rotate to keep price tags upright */
    .fw-harding .price-tag { --counter-rotate: 30deg; }
    .fw-lincoln .price-tag { --counter-rotate: 25deg; }
    .fw-presidio .price-tag { --counter-rotate: 15deg; }
    .fw-sharp .price-tag { --counter-rotate: 25deg; }
    .fw-gleneagles .price-tag { --counter-rotate: 20deg; }
    .fw-olympic .price-tag { --counter-rotate: 40deg; }
    .fw-paloalto .price-tag { --counter-rotate: -10deg; }
    .fw-santateresa .price-tag { --counter-rotate: -25deg; }
    .fw-cinnabar .price-tag { --counter-rotate: -15deg; }
    .fw-deepcliff .price-tag { --counter-rotate: 5deg; }
    .fw-sanjose .price-tag { --counter-rotate: -12deg; }
    .fw-pasatiempo .price-tag { --counter-rotate: -5deg; }
    .fw-delaveaga .price-tag { --counter-rotate: -8deg; }
    .fw-seascape .price-tag { --counter-rotate: -12deg; }
    .fw-pajaro .price-tag { --counter-rotate: -15deg; }
    .fw-salinas .price-tag { --counter-rotate: -20deg; }
    .fw-loslagos .price-tag { --counter-rotate: -18deg; }
    .fw-gilroy .price-tag { --counter-rotate: -22deg; }
    .fw-roosterrun .price-tag { --counter-rotate: 18deg; }
    .fw-corica .price-tag { --counter-rotate: 10deg; }
    .fw-corica-n .price-tag { --counter-rotate: 8deg; }
    .fw-tilden .price-tag { --counter-rotate: 5deg; }
    .fw-boundary .price-tag { --counter-rotate: -8deg; }
    .fw-metropolitan .price-tag { --counter-rotate: 15deg; }
    .fw-poppy .price-tag { --counter-rotate: -12deg; }
    .fw-diablo .price-tag { --counter-rotate: 8deg; }
    .fw-peacock .price-tag { --counter-rotate: 25deg; }
    .fw-indian .price-tag { --counter-rotate: 20deg; }
    .fw-stonetree .price-tag { --counter-rotate: 15deg; }
    .fw-millvalley .price-tag { --counter-rotate: 30deg; }
    .fw-bodega .price-tag { --counter-rotate: 35deg; }
    .fw-northwood .price-tag { --counter-rotate: 40deg; }
    .fw-bennettvalley .price-tag { --counter-rotate: 15deg; }
    .fw-windsor .price-tag { --counter-rotate: 20deg; }
    .fw-valleymoon .price-tag { --counter-rotate: 10deg; }
    .fw-sonomagc .price-tag { --counter-rotate: 8deg; }
    .fw-fairgrounds .price-tag { --counter-rotate: 25deg; }
    .fw-oakmont .price-tag { --counter-rotate: 12deg; }
    .fw-fleming .price-tag { --counter-rotate: 28deg; }
    .fw-crystal .price-tag { --counter-rotate: 12deg; }
    .fw-hmb-old .price-tag { --counter-rotate: 20deg; }
    .fw-hmb-ocean .price-tag { --counter-rotate: 25deg; }
    .fw-bridges .price-tag { --counter-rotate: -10deg; }
    .fw-sanramon .price-tag { --counter-rotate: -5deg; }
    .fw-callippe .price-tag { --counter-rotate: -15deg; }
    .fw-redwood .price-tag { --counter-rotate: 5deg; }
    .fw-mcinnis .price-tag { --counter-rotate: 22deg; }
    .fw-laspositas .price-tag { --counter-rotate: -18deg; }
    .fw-wente .price-tag { --counter-rotate: -15deg; }
    .fw-chardonnay .price-tag { --counter-rotate: 5deg; }
    .fw-eaglevines .price-tag { --counter-rotate: 8deg; }
    .fw-napakennedy .price-tag { --counter-rotate: 3deg; }
    .fw-vintners .price-tag { --counter-rotate: 6deg; }
    .fw-silverado-n .price-tag { --counter-rotate: 10deg; }
    .fw-silverado-s .price-tag { --counter-rotate: 12deg; }

    /* Top title bar - minimal */
    .title-bar {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 20;
      padding: 0.75rem 1rem;
      background: linear-gradient(180deg, rgba(244, 235, 224, 0.95) 0%, rgba(244, 235, 224, 0.8) 70%, transparent 100%);
      text-align: center;
    }

    .map-title {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--text-dark);
      letter-spacing: 0.05em;
      margin: 0;
    }

    .map-subtitle {
      font-size: 0.65rem;
      color: var(--text-muted);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin: 0;
      font-weight: 400;
    }

    /* Bottom navigation bar */
    .nav-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      padding: 0.5rem 1rem calc(0.75rem + env(safe-area-inset-bottom, 0px));
      background: rgba(244, 235, 224, 0.98);
      border-top: 1px solid var(--contour-light);
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    }

    .nav-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 0.5rem 1rem;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--text-dark);
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid var(--contour-light);
      border-radius: 6px;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s ease;
      min-width: 70px;
    }

    .nav-btn:hover {
      background: rgba(255, 255, 255, 0.95);
      border-color: var(--contour);
      transform: translateY(-2px);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
    }

    .nav-btn.primary {
      background: linear-gradient(135deg, #10B981 0%, #059669 100%);
      color: #fff;
      border-color: transparent;
      box-shadow: 0 3px 12px rgba(16, 185, 129, 0.4);
      font-weight: 700;
      position: relative;
      overflow: hidden;
    }

    .nav-btn.primary:hover {
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      transform: translateY(-3px);
      box-shadow: 0 5px 18px rgba(16, 185, 129, 0.5);
    }

    .nav-btn.primary:active {
      transform: translateY(-1px);
    }

    /* Ripple effect */
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      transform: scale(0);
      animation: ripple-anim 0.6s ease-out;
      pointer-events: none;
    }

    @keyframes ripple-anim {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    .nav-btn svg {
      width: 18px;
      height: 18px;
      fill: none;
      stroke: currentColor;
      stroke-width: 1.8;
    }

    .nav-btn.primary svg {
      stroke-width: 2;
    }

    /* Zoom controls - fixed bottom right corner */
    .zoom-controls {
      position: fixed;
      bottom: calc(90px + env(safe-area-inset-bottom, 12px));
      right: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0;
      z-index: 100;
    }

    .zoom-label {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 9px;
      color: var(--text-muted);
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .zoom-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 44px;
      height: 44px;
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid var(--contour-light);
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .zoom-btn:first-of-type {
      border-radius: 8px 8px 0 0;
      border-bottom: none;
    }

    .zoom-btn:last-of-type {
      border-radius: 0 0 8px 8px;
    }

    .zoom-btn:hover {
      background: rgba(255, 255, 255, 1);
      border-color: var(--contour);
    }

    .zoom-btn:active {
      background: var(--paper-dark);
    }

    .zoom-btn svg {
      width: 20px;
      height: 20px;
      stroke: var(--text-dark);
      stroke-width: 2.5;
      stroke-linecap: round;
    }

    /* Legend */
    .legend {
      position: absolute;
      bottom: 2rem;
      left: 2rem;
      background: rgba(244, 235, 224, 0.95);
      border: 2px solid var(--contour);
      padding: 1rem 1.5rem;
      font-size: 0.85rem;
      z-index: 15;
    }

    .legend-title {
      font-family: 'Playfair Display', Georgia, serif;
      font-weight: 600;
      margin-bottom: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      font-size: 0.75rem;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 0.5rem;
    }

    .legend-item:last-child { margin-bottom: 0; }

    .legend-fairway {
      width: 20px;
      height: 12px;
      background: var(--fairway);
      border-radius: 40%;
    }

    .legend-water {
      width: 20px;
      height: 12px;
      background: var(--water);
      border-radius: 2px;
    }

    .legend-contour {
      width: 20px;
      height: 0;
      border-top: 2px solid var(--contour-light);
    }

    /* Scale bar */
    .scale-bar {
      position: absolute;
      bottom: 2rem;
      right: 2rem;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      font-size: 0.75rem;
      color: var(--text-muted);
      z-index: 15;
    }

    .scale-bar-line {
      display: flex;
      margin-bottom: 4px;
    }

    .scale-bar-segment {
      width: 30px;
      height: 8px;
      border: 1px solid var(--contour);
    }

    .scale-bar-segment:nth-child(odd) { background: var(--contour); }
    .scale-bar-segment:nth-child(even) { background: var(--paper); }

    /* Compass */
    .compass-rose {
      position: absolute;
      top: 2rem;
      right: 2rem;
      width: 70px;
      height: 70px;
      z-index: 15;
    }

    .compass-rose svg {
      width: 100%;
      height: 100%;
    }

    /* Login button near compass */
    .login-btn {
      position: absolute;
      top: 2rem;
      right: 7rem;
      z-index: 20;
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 0.4rem 0.7rem;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--text-dark);
      background: rgba(255, 255, 255, 0.85);
      border: 1px solid var(--contour-light);
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s ease;
    }

    .login-btn:hover {
      background: rgba(255, 255, 255, 1);
      border-color: var(--contour);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .login-btn svg {
      width: 14px;
      height: 14px;
      stroke: currentColor;
      stroke-width: 2;
      fill: none;
    }

    /* Region labels - GPS-based positioning */
    .region-label {
      position: absolute;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-muted);
      pointer-events: none;
      z-index: 10;
    }

    /* SF: ~37.77, -122.45 -> top: 43%, left: 43% */
    .label-sf { top: 43%; left: 36%; transform: rotate(-10deg); }
    /* South Bay: ~37.3, -121.9 -> top: 70%, left: 76% */
    .label-sb { top: 72%; left: 76%; }
    /* East Bay: ~37.8, -122.1 -> top: 41%, left: 65% */
    .label-eb { top: 38%; left: 68%; }
    /* Marin/North Bay: ~38.0, -122.5 -> top: 29%, left: 41% */
    .label-ma { top: 25%; left: 35%; transform: rotate(-5deg); }
    /* Napa: ~38.3, -122.3 -> top: 12%, left: 53% */
    .label-napa { top: 6%; left: 52%; color: #722F37; font-style: italic; }
    .label-sonoma { top: 4%; left: 38%; color: #5a3e36; font-style: italic; }
    .label-pacific { top: 50%; left: 8%; writing-mode: vertical-rl; transform: rotate(180deg); letter-spacing: 0.3em; color: var(--water-dark); }

    /* Landmarks */
    .landmarks {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 8;
    }

    .landmark {
      position: absolute;
      opacity: 0.75;
    }

    /* Golden Gate Bridge - BIG iconic red bridge spanning the strait */
    .landmark-ggb {
      top: 36%;
      left: 33%;
      width: 90px;
      height: 45px;
      z-index: 50;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
      animation: bridge-glow 3s ease-in-out infinite alternate;
    }

    @keyframes bridge-glow {
      0% { filter: drop-shadow(0 4px 8px rgba(196, 85, 58, 0.3)); }
      100% { filter: drop-shadow(0 6px 16px rgba(196, 85, 58, 0.5)); }
    }

    .landmark-ggb svg {
      width: 100%;
      height: 100%;
      fill: none;
      stroke: #c4553a;
      stroke-width: 2.5;
    }

    .landmark-ggb svg .bridge-tower {
      stroke: #c4553a;
      stroke-width: 3;
    }

    .landmark-ggb svg .bridge-cable {
      stroke: #d4654a;
      stroke-width: 1.5;
    }

    .landmark-ggb svg .bridge-deck {
      stroke: #c4553a;
      stroke-width: 4;
    }

    /* North Bay Redwoods / Muir Woods: ~37.9, -122.58 */
    .landmark-redwoods {
      top: 32%;
      left: 28%;
    }

    .landmark-redwoods svg {
      fill: var(--fairway);
      opacity: 0.6;
    }

    /* Google Campus label - Mountain View: ~37.42, -122.08 */
    .landmark-google {
      top: 63%;
      left: 66%;
      font-family: 'Arial', sans-serif;
      font-size: 6px;
      font-weight: 700;
      letter-spacing: 0.3px;
      opacity: 0.55;
      transform: rotate(-2deg);
    }

    .landmark-google span:nth-child(1) { color: #4285f4; }
    .landmark-google span:nth-child(2) { color: #ea4335; }
    .landmark-google span:nth-child(3) { color: #fbbc04; }
    .landmark-google span:nth-child(4) { color: #4285f4; }
    .landmark-google span:nth-child(5) { color: #34a853; }
    .landmark-google span:nth-child(6) { color: #ea4335; }

    /* East Bay Landmarks - GPS-based */
    /* Oakland: ~37.8, -122.27 -> top: 41%, left: 55% */
    .landmark-oakland {
      top: 42%; left: 55%;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 8px; font-weight: 600;
      color: var(--text-dark); opacity: 0.7;
    }
    /* Mt Diablo: ~37.88, -121.91 -> top: 36%, left: 76% */
    .landmark-diablo {
      top: 30%; left: 78%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 7px; font-style: italic;
      color: var(--contour); opacity: 0.8;
      transform: rotate(-8deg);
    }
    /* Walnut Creek: ~37.9, -122.06 -> top: 35%, left: 67% */
    .landmark-walnutcreek {
      top: 34%; left: 68%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 6px; color: var(--text-muted); opacity: 0.6;
    }
    /* Livermore: ~37.68, -121.77 -> top: 48%, left: 84% */
    .landmark-livermore {
      top: 50%; left: 86%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 6px; color: var(--text-muted); opacity: 0.6;
    }
    /* Pleasanton: ~37.66, -121.87 -> top: 49%, left: 78% */
    .landmark-pleasanton {
      top: 50%; left: 78%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 5px; color: var(--text-muted); opacity: 0.6;
    }
    /* Fremont: ~37.55, -121.98 -> top: 56%, left: 72% */
    .landmark-fremont {
      top: 57%; left: 72%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 6px; color: var(--text-muted); opacity: 0.6;
    }
    /* Hayward: ~37.67, -122.08 -> top: 49%, left: 66% */
    .landmark-hayward {
      top: 50%; left: 66%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 5px; color: var(--text-muted); opacity: 0.5;
    }
    /* Lake Merritt: ~37.8, -122.26 -> top: 41%, left: 55% */
    .landmark-lakemerritt {
      top: 42%; left: 56%;
      width: 8px; height: 6px;
      background: var(--water);
      border-radius: 50%;
      opacity: 0.6;
    }
    /* Coliseum: ~37.75, -122.20 -> top: 44%, left: 59% */
    .landmark-coliseum {
      top: 45%; left: 59%;
      font-family: 'Arial', sans-serif;
      font-size: 4px; font-weight: 700;
      color: #006341; opacity: 0.5;
    }

    /* South Bay Landmarks - GPS-based */
    /* San Jose: ~37.34, -121.89 -> top: 68%, left: 77% */
    .landmark-sanjose {
      top: 70%; left: 78%;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 8px; font-weight: 600;
      color: var(--text-dark); opacity: 0.7;
    }
    /* Apple Park: ~37.33, -122.01 -> top: 69%, left: 70% */
    .landmark-apple {
      top: 67%; left: 68%;
      opacity: 0.5;
    }
    .landmark-apple svg { fill: #555; }
    /* Santa Cruz: ~36.97, -122.03 -> top: 90%, left: 69% */
    .landmark-santacruz {
      top: 92%; left: 65%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 6px; color: var(--text-muted); opacity: 0.6;
      transform: rotate(-5deg);
    }

    /* North Bay Landmarks - GPS-based */
    /* Napa city: ~38.3, -122.29 -> top: 12%, left: 54% */
    .landmark-napa {
      top: 10%; left: 54%;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 7px; font-weight: 600;
      color: #722F37; opacity: 0.7;
      font-style: italic;
    }
    /* Sausalito: ~37.86, -122.48 -> just north of bridge on Marin side */
    .landmark-sausalito {
      top: 34%; left: 38%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 5px; color: var(--text-muted); opacity: 0.5;
    }
    /* San Rafael: ~37.97, -122.53 -> top: 31%, left: 39% */
    .landmark-sanrafael {
      top: 30%; left: 39%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 5px; color: var(--text-muted); opacity: 0.6;
    }
    /* Wine Country label: ~38.4, -122.45 */
    .landmark-winecountry {
      top: 5%; left: 44%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 5px; font-style: italic;
      color: #722F37; opacity: 0.5;
      letter-spacing: 2px;
    }
    /* Point Reyes: ~38.07, -122.87 */
    .landmark-pointreyes {
      top: 24%; left: 18%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 5px; font-style: italic;
      color: var(--text-muted); opacity: 0.5;
      transform: rotate(-15deg);
    }

    /* Other Landmarks - GPS-based */
    /* Oakland Airport: ~37.72, -122.22 */
    .landmark-oaklandairport {
      top: 46%; left: 58%;
      font-family: 'Arial', sans-serif;
      font-size: 5px; font-weight: 700;
      color: var(--text-muted); opacity: 0.5;
    }
    /* Bay Bridge: ~37.79, -122.38 */
    .landmark-baybridge {
      top: 42%; left: 48%;
      opacity: 0.6;
    }
    /* Mission District: ~37.76, -122.42 */
    .landmark-mission {
      top: 44%; left: 46%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 4px; color: var(--text-muted); opacity: 0.4;
    }

    /* Oakland Port Cranes: ~37.8, -122.32 */
    .landmark-cranes {
      top: 41%;
      left: 52%;
    }

    .landmark-cranes svg {
      fill: none;
      stroke: var(--contour);
      stroke-width: 1;
      opacity: 0.6;
    }

    /* Transamerica Pyramid - downtown SF: ~37.795, -122.40 */
    .landmark-pyramid {
      top: 41%;
      left: 47%;
    }

    .landmark-pyramid svg {
      fill: none;
      stroke: var(--contour);
      stroke-width: 1;
      opacity: 0.6;
    }

    /* Mt. Tamalpais: ~37.92, -122.60 */
    .landmark-tamalpais {
      top: 29%;
      left: 26%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 6px;
      font-style: italic;
      color: var(--text-muted);
      opacity: 0.7;
      transform: rotate(-5deg);
    }

    /* Alcatraz Island: ~37.83, -122.42 */
    .landmark-alcatraz {
      top: 39%;
      left: 46%;
      width: 10px;
      height: 8px;
      background: var(--paper-dark);
      border-radius: 50%;
      border: 1px solid var(--contour-light);
    }

    /* Candlestick Point: ~37.71, -122.39 */
    .landmark-candlestick {
      top: 46%;
      left: 48%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 5px;
      color: var(--text-muted);
      opacity: 0.6;
      white-space: nowrap;
    }

    /* In-N-Out (iconic Bay Area spots) */
    .landmark-innout {
      font-family: 'Arial', sans-serif;
      font-size: 5px;
      font-weight: 700;
      color: #ff0000;
      opacity: 0.5;
      white-space: nowrap;
    }

    /* In-N-Out Mountain View: ~37.41, -122.08 */
    .landmark-innout-mv { top: 64%; left: 66%; }
    /* In-N-Out SF Fisherman's Wharf: ~37.81, -122.42 */
    .landmark-innout-sf { top: 40%; left: 46%; transform: rotate(-5deg); }

    /* Stanford University: ~37.43, -122.17 */
    .landmark-stanford {
      top: 63%;
      left: 61%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 6px;
      font-weight: 600;
      color: #8C1515;
      opacity: 0.6;
    }

    /* UC Berkeley: ~37.87, -122.26 */
    .landmark-berkeley {
      top: 37%;
      left: 55%;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 6px;
      font-weight: 600;
      color: #003262;
      opacity: 0.6;
    }

    /* SFO Airport: ~37.62, -122.38 */
    .landmark-sfo {
      top: 52%;
      left: 48%;
      font-family: 'Arial', sans-serif;
      font-size: 5px;
      font-weight: 700;
      color: var(--text-muted);
      opacity: 0.6;
    }

    /* Golden Gate Park: ~37.77, -122.49 */
    .landmark-ggpark {
      top: 43%;
      left: 41%;
      width: 28px;
      height: 8px;
      background: var(--fairway);
      opacity: 0.4;
      border-radius: 2px;
      transform: rotate(-5deg);
    }

    /* Presidio: ~37.80, -122.47 */
    .landmark-presidio {
      top: 41%;
      left: 43%;
      width: 18px;
      height: 12px;
      background: var(--fairway);
      opacity: 0.35;
      border-radius: 3px;
      transform: rotate(-10deg);
    }

    /* ============================================
       SIMPLE SEARCH LINK
       ============================================ */

    .search-link {
      position: fixed;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 500;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 14px 24px;
      background: rgba(244, 235, 224, 0.95);
      border: 2px solid var(--contour);
      border-radius: 9999px;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 1rem;
      color: var(--text-muted);
      text-decoration: none;
      box-shadow: 0 2px 12px rgba(61, 50, 37, 0.15);
      backdrop-filter: blur(10px);
      transition: all 0.2s ease;
    }

    .search-link:hover {
      border-color: var(--fairway);
      color: var(--text-dark);
      box-shadow: 0 4px 20px rgba(61, 50, 37, 0.2);
    }

    .search-link svg {
      color: var(--fairway);
      flex-shrink: 0;
    }

    @media (max-width: 768px) {
      .search-link {
        top: 50px;
        padding: 12px 20px;
        font-size: 0.9rem;
      }
    }

    /* ============================================
       DISABLED: OLD SEARCH OVERLAY STYLES
       ============================================ */
    /*
    .search-overlay {
      position: fixed;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 500;
      width: 100%;
      max-width: 900px;
      padding: 0 16px;
      pointer-events: none;
    }

    .search-overlay > * {
      pointer-events: auto;
    }
    */

    .search-bar {
      display: flex;
      align-items: center;
      gap: 0;
      background: rgba(255, 255, 255, 0.98);
      border: 2px solid var(--contour);
      border-radius: 9999px;
      box-shadow: 0 4px 20px rgba(61, 50, 37, 0.15),
                  0 2px 8px rgba(61, 50, 37, 0.1);
      padding: 6px;
      height: 64px;
      backdrop-filter: blur(10px);
    }

    .search-bar:focus-within {
      border-color: var(--fairway);
      box-shadow: 0 4px 20px rgba(61, 50, 37, 0.15),
                  0 2px 8px rgba(61, 50, 37, 0.1),
                  0 0 0 3px rgba(90, 143, 74, 0.2);
    }

    .search-field {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 8px 20px;
      border-right: 1px solid var(--contour-light);
      min-width: 0;
      position: relative;
    }

    .search-field:last-of-type {
      border-right: none;
    }

    .search-field-label {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 10px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 2px;
    }

    .search-field-input {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 14px;
      font-weight: 400;
      color: var(--text-dark);
      border: none;
      outline: none;
      background: transparent;
      padding: 0;
      width: 100%;
      cursor: pointer;
    }

    .search-field-input::placeholder {
      color: var(--contour);
    }

    .search-field-input:disabled {
      cursor: default;
    }

    .search-field.course-field {
      flex: 2;
    }

    .search-button {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      background: linear-gradient(135deg, var(--fairway) 0%, var(--fairway-light) 100%);
      color: #fff;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 14px;
      font-weight: 600;
      padding: 0 24px;
      border: none;
      border-radius: 9999px;
      cursor: pointer;
      min-width: 120px;
      height: 52px;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(90, 143, 74, 0.3);
    }

    .search-button:hover {
      background: linear-gradient(135deg, var(--fairway-light) 0%, var(--fairway) 100%);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(90, 143, 74, 0.4);
    }

    .search-button:active {
      transform: translateY(0);
    }

    .search-button svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
      stroke-width: 2.5;
      fill: none;
    }

    /* Dropdown Styles */
    .search-dropdown {
      position: absolute;
      top: calc(100% + 8px);
      left: -20px;
      right: -20px;
      z-index: 600;
      background: rgba(255, 255, 255, 0.98);
      border: 2px solid var(--contour);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(61, 50, 37, 0.2);
      max-height: 320px;
      overflow-y: auto;
      display: none;
      backdrop-filter: blur(10px);
    }

    .search-dropdown.active {
      display: block;
      animation: dropdownFadeIn 0.2s ease;
    }

    @keyframes dropdownFadeIn {
      from { opacity: 0; transform: translateY(-8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .dropdown-section {
      padding: 8px 0;
    }

    .dropdown-section:not(:last-child) {
      border-bottom: 1px solid var(--contour-light);
    }

    .dropdown-section-header {
      padding: 6px 16px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 10px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 16px;
      cursor: pointer;
      transition: background 0.15s ease;
    }

    .dropdown-item:hover,
    .dropdown-item.highlighted {
      background: rgba(90, 143, 74, 0.1);
    }

    .dropdown-item-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      background: rgba(90, 143, 74, 0.15);
      border-radius: 8px;
      color: var(--fairway);
    }

    .dropdown-item-icon svg {
      width: 16px;
      height: 16px;
      stroke: currentColor;
      stroke-width: 2;
      fill: none;
    }

    .dropdown-item-content {
      flex: 1;
      min-width: 0;
    }

    .dropdown-item-title {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-dark);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .dropdown-item-subtitle {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 12px;
      color: var(--text-muted);
    }

    .highlight-match {
      background: rgba(251, 191, 36, 0.3);
      color: var(--text-dark);
      font-weight: 600;
      border-radius: 2px;
      padding: 0 2px;
    }

    /* Time Slot Options */
    .time-slot-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 16px;
      cursor: pointer;
      transition: background 0.15s ease;
    }

    .time-slot-option:hover {
      background: rgba(90, 143, 74, 0.1);
    }

    .time-slot-option.selected {
      background: rgba(90, 143, 74, 0.15);
    }

    .time-slot-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 8px;
    }

    .time-slot-icon.early { background: rgba(251, 191, 36, 0.2); color: #d97706; }
    .time-slot-icon.morning { background: rgba(251, 191, 36, 0.3); color: #b45309; }
    .time-slot-icon.afternoon { background: rgba(249, 115, 22, 0.2); color: #ea580c; }
    .time-slot-icon.twilight { background: rgba(239, 68, 68, 0.15); color: #dc2626; }

    .time-slot-icon svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
      stroke-width: 2;
      fill: none;
    }

    .time-slot-info {
      flex: 1;
    }

    .time-slot-name {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-dark);
    }

    .time-slot-range {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 12px;
      color: var(--text-muted);
    }

    .time-slot-check {
      width: 20px;
      height: 20px;
      border: 2px solid var(--contour);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.15s ease;
    }

    .time-slot-option.selected .time-slot-check {
      background: var(--fairway);
      border-color: var(--fairway);
    }

    .time-slot-check svg {
      width: 12px;
      height: 12px;
      stroke: #fff;
      stroke-width: 3;
      fill: none;
      opacity: 0;
    }

    .time-slot-option.selected .time-slot-check svg {
      opacity: 1;
    }

    /* Player Count Stepper */
    .player-stepper {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 16px;
    }

    .player-stepper-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border: 2px solid var(--contour);
      border-radius: 50%;
      background: #fff;
      color: var(--text-dark);
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .player-stepper-btn:hover:not(:disabled) {
      border-color: var(--fairway);
      color: var(--fairway);
    }

    .player-stepper-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .player-stepper-btn svg {
      width: 20px;
      height: 20px;
      stroke: currentColor;
      stroke-width: 2.5;
      fill: none;
    }

    .player-stepper-value {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 28px;
      font-weight: 700;
      color: var(--text-dark);
      min-width: 50px;
      text-align: center;
    }

    .player-quick-options {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      padding: 12px 16px;
      border-top: 1px solid var(--contour-light);
    }

    .player-quick-btn {
      padding: 10px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-dark);
      background: rgba(139, 115, 85, 0.1);
      border: 1px solid var(--contour-light);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .player-quick-btn:hover {
      background: rgba(90, 143, 74, 0.1);
      border-color: var(--fairway);
    }

    .player-quick-btn.selected {
      background: rgba(90, 143, 74, 0.2);
      border-color: var(--fairway);
      color: var(--fairway);
    }

    /* Calendar Styles */
    .calendar-popup {
      padding: 16px;
    }

    .calendar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .calendar-month-year {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 16px;
      font-weight: 600;
      color: var(--text-dark);
    }

    .calendar-nav-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border: none;
      border-radius: 8px;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .calendar-nav-btn:hover:not(:disabled) {
      background: rgba(90, 143, 74, 0.1);
      color: var(--text-dark);
    }

    .calendar-nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .calendar-nav-btn svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
      stroke-width: 2;
      fill: none;
    }

    .calendar-weekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      margin-bottom: 8px;
    }

    .calendar-weekday {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 11px;
      font-weight: 600;
      color: var(--text-muted);
      text-align: center;
      padding: 6px 0;
    }

    .calendar-days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
    }

    .calendar-day {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 14px;
      color: var(--text-dark);
      border: none;
      border-radius: 50%;
      background: transparent;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .calendar-day:hover:not(:disabled):not(.selected) {
      background: rgba(90, 143, 74, 0.1);
    }

    .calendar-day.today {
      font-weight: 600;
      border: 2px solid var(--fairway);
    }

    .calendar-day.selected {
      background: var(--fairway);
      color: #fff;
      font-weight: 600;
    }

    .calendar-day:disabled {
      color: var(--contour-light);
      cursor: not-allowed;
    }

    .calendar-day.outside-month {
      color: var(--contour-light);
    }

    .quick-dates {
      display: flex;
      gap: 8px;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid var(--contour-light);
    }

    .quick-date-btn {
      flex: 1;
      padding: 8px 12px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 12px;
      font-weight: 500;
      color: var(--text-dark);
      background: rgba(139, 115, 85, 0.1);
      border: 1px solid var(--contour-light);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .quick-date-btn:hover {
      background: rgba(90, 143, 74, 0.1);
      border-color: var(--fairway);
    }

    /* Inline Results Container */
    .search-results-container {
      position: fixed;
      top: 140px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 400;
      width: 100%;
      max-width: 900px;
      max-height: calc(100vh - 220px);
      padding: 0 16px;
      display: none;
    }

    .search-results-container.active {
      display: block;
    }

    .search-results {
      background: rgba(255, 255, 255, 0.98);
      border: 2px solid var(--contour);
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(61, 50, 37, 0.2);
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    .search-results-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      background: rgba(139, 115, 85, 0.08);
      border-bottom: 1px solid var(--contour-light);
    }

    .search-results-count {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 14px;
      color: var(--text-muted);
    }

    .search-results-count strong {
      color: var(--text-dark);
      font-weight: 600;
    }

    .search-results-close {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      border: none;
      border-radius: 50%;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .search-results-close:hover {
      background: rgba(139, 115, 85, 0.15);
      color: var(--text-dark);
    }

    .search-results-close svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
      stroke-width: 2;
      fill: none;
    }

    .search-results-body {
      max-height: calc(100vh - 300px);
      overflow-y: auto;
      padding: 8px;
    }

    .search-result-card {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 14px 16px;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.15s ease;
    }

    .search-result-card:hover {
      background: rgba(90, 143, 74, 0.08);
    }

    .search-result-time {
      text-align: center;
      min-width: 60px;
    }

    .search-result-time-value {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 18px;
      font-weight: 700;
      color: var(--text-dark);
    }

    .search-result-time-date {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 11px;
      color: var(--text-muted);
    }

    .search-result-info {
      flex: 1;
      min-width: 0;
    }

    .search-result-name {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 15px;
      font-weight: 600;
      color: var(--text-dark);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .search-result-location {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 12px;
      color: var(--text-muted);
    }

    .search-result-badges {
      display: flex;
      gap: 6px;
      margin-top: 4px;
    }

    .search-result-badge {
      padding: 2px 8px;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 10px;
      font-weight: 600;
      color: var(--text-muted);
      background: rgba(139, 115, 85, 0.1);
      border-radius: 4px;
    }

    .search-result-badge.spots {
      background: rgba(90, 143, 74, 0.15);
      color: var(--fairway);
    }

    .search-result-price {
      text-align: right;
    }

    .search-result-price-value {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 20px;
      font-weight: 700;
      color: var(--fairway);
    }

    .search-result-book {
      padding: 8px 16px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 13px;
      font-weight: 600;
      color: #fff;
      background: var(--fairway);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
      text-decoration: none;
    }

    .search-result-book:hover {
      background: var(--fairway-light);
    }

    .search-results-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px;
      color: var(--text-muted);
    }

    .search-results-loading-spinner {
      width: 32px;
      height: 32px;
      border: 3px solid var(--contour-light);
      border-top-color: var(--fairway);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-bottom: 12px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .search-no-results {
      text-align: center;
      padding: 40px 20px;
    }

    .search-no-results h3 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 18px;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 8px;
    }

    .search-no-results p {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 14px;
      color: var(--text-muted);
    }

    .view-all-link {
      display: block;
      padding: 12px 20px;
      text-align: center;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 14px;
      font-weight: 600;
      color: var(--fairway);
      background: rgba(90, 143, 74, 0.08);
      border-top: 1px solid var(--contour-light);
      text-decoration: none;
      transition: background 0.15s ease;
    }

    .view-all-link:hover {
      background: rgba(90, 143, 74, 0.15);
    }

    /* Search Trigger (collapsed state for mobile) */
    .search-trigger {
      display: none;
      align-items: center;
      gap: 10px;
      width: 100%;
      padding: 14px 18px;
      background: rgba(244, 235, 224, 0.95);
      border: 1px solid var(--contour-light);
      border-radius: 28px;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 0.95rem;
      color: var(--text-muted);
      cursor: pointer;
      box-shadow: 0 2px 12px rgba(61, 50, 37, 0.1);
      backdrop-filter: blur(10px);
      transition: all 0.2s ease;
    }

    .search-trigger:hover {
      border-color: var(--fairway);
      box-shadow: 0 4px 16px rgba(61, 50, 37, 0.15);
    }

    .search-trigger svg {
      color: var(--fairway);
      flex-shrink: 0;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .search-overlay {
        top: 50px;
        padding: 0 12px;
      }

      /* Show trigger, hide full bar by default on mobile */
      .search-trigger {
        display: flex;
      }

      .search-bar {
        display: none;
        flex-direction: column;
        border-radius: 20px;
        height: auto;
        padding: 12px;
        gap: 0;
      }

      /* When expanded, show the full search bar */
      .search-overlay.expanded .search-trigger {
        display: none;
      }

      .search-overlay.expanded .search-bar {
        display: flex;
      }

      .search-field {
        border-right: none;
        border-bottom: 1px solid var(--contour-light);
        padding: 10px 16px;
        width: 100%;
      }

      .search-field:last-of-type {
        border-bottom: none;
      }

      .search-field.course-field {
        flex: none;
      }

      .search-button {
        width: 100%;
        margin-top: 8px;
        height: 48px;
      }

      .search-dropdown {
        left: -12px;
        right: -12px;
        max-height: 250px;
      }

      .search-results-container {
        top: auto;
        bottom: 70px;
        max-height: 50vh;
      }

      .search-results-body {
        max-height: 40vh;
      }

      .title-bar {
        padding: 0.5rem 0.75rem;
      }

      .map-title {
        font-size: 1.1rem;
      }

      .map-subtitle {
        font-size: 0.55rem;
      }

      .nav-bar {
        padding: 0.6rem 0.5rem calc(1rem + env(safe-area-inset-bottom, 12px));
        gap: 0.4rem;
        bottom: 0;
      }

      .nav-btn {
        padding: 0.6rem 0.8rem;
        font-size: 0.7rem;
        min-width: 65px;
      }

      .nav-btn svg {
        width: 20px;
        height: 20px;
      }

      .zoom-controls {
        bottom: calc(80px + env(safe-area-inset-bottom, 12px));
        right: 12px;
      }

      .zoom-btn {
        width: 40px;
        height: 40px;
      }

      .zoom-label {
        font-size: 8px;
      }

      .login-btn {
        top: 0.5rem;
        right: 4rem;
        padding: 0.3rem 0.5rem;
        font-size: 0.6rem;
      }

      .legend, .scale-bar {
        display: none;
      }

      .compass-rose {
        width: 40px;
        height: 40px;
        top: 0.5rem;
        right: 0.5rem;
      }

      .fairway {
        transform: scale(0.85);
      }

      .region-label {
        font-size: 0.55rem;
      }
    }
  </style>
</head>
<body>
  <div class="map-container">
    <!-- Zoomed map content wrapper -->
    <div class="map-content">
    <!-- Paper texture overlay -->
    <div class="paper-texture"></div>

    <!-- Grid lines -->
    <div class="map-grid"></div>

    <!-- Contour lines -->
    <div class="contour-lines">
      <div class="contour contour-sf-1"></div>
      <div class="contour contour-sf-2"></div>
      <div class="contour contour-sf-3"></div>
      <div class="contour contour-eb-1"></div>
      <div class="contour contour-eb-2"></div>
      <div class="contour contour-eb-3"></div>
      <div class="contour contour-ma-1"></div>
      <div class="contour contour-ma-2"></div>
      <div class="contour contour-sb-1"></div>
      <div class="contour contour-sb-2"></div>
    </div>

    <!-- California Coastline - accurate SVG trace -->
    <div class="california-coast">
      <svg viewBox="0 -20 100 140" preserveAspectRatio="none">
        <defs>
          <linearGradient id="oceanGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:#a8c5d8;stop-opacity:1" />
            <stop offset="70%" style="stop-color:#a8c5d8;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#a8c5d8;stop-opacity:0" />
          </linearGradient>
        </defs>
        <!-- Pacific Ocean: California coastline from Sonoma to Big Sur -->
        <path fill="url(#oceanGradient)" d="
          M 0,-20
          L 22,-20
          L 20,-10
          L 18,0
          C 16,4 14,8 13,12
          L 11,16
          C 8,20 5,24 3,28
          L 2,32
          C 1,34 3,36 8,38
          L 16,40
          C 22,41 28,40 32,39
          L 36,38
          C 38,38 40,40 38,42
          L 34,44
          C 30,46 26,48 24,52
          L 22,56
          C 20,60 22,64 26,66
          L 30,67
          C 32,67 30,69 26,72
          L 22,76
          C 18,80 20,84 24,87
          L 30,90
          C 38,93 46,95 52,96
          L 56,97
          C 58,98 56,100 50,103
          L 42,107
          C 36,110 30,113 26,116
          L 22,120
          L 0,120
          Z
        "/>
        <!-- Point Reyes Peninsula - distinctive hook -->
        <path fill="#a8c5d8" d="
          M 3,28
          L 0,32
          C -2,36 0,38 4,40
          L 10,41
          C 14,41 18,40 20,39
          L 18,37
          L 12,35
          L 6,32
          Z
        "/>
        <!-- Bodega Head -->
        <path fill="#a8c5d8" d="
          M 13,12
          L 10,14
          C 8,16 10,18 13,18
          L 15,16
          Z
        "/>
        <!-- Half Moon Bay indent - the bay where the golf courses are -->
        <path fill="#a8c5d8" opacity="0.7" d="
          M 22,56
          C 20,58 18,62 20,65
          L 24,66
          L 26,64
          L 24,60
          Z
        "/>
        <!-- Golden Gate opening - where Pacific meets SF Bay -->
        <path fill="var(--water-dark)" opacity="0.6" d="
          M 32,39
          L 36,38
          C 38,38 40,40 38,42
          L 34,44
          C 32,44 32,42 32,40
          Z
        "/>
      </svg>
    </div>

    <!-- Water bodies -->
    <div class="tomales-bay"></div>
    <div class="drakes-bay"></div>
    <div class="bodega-bay"></div>
    <div class="golden-gate-strait"></div>
    <div class="san-pablo-bay"></div>
    <div class="bay-water"></div>
    <div class="south-bay"></div>
    <div class="half-moon-bay-water"></div>
    <div class="monterey-bay"></div>
    <div class="sac-delta"></div>

    <!-- Bay Area Landmarks -->
    <div class="landmarks">
      <!-- Parks (background layer) -->
      <div class="landmark landmark-presidio"></div>
      <div class="landmark landmark-ggpark"></div>

      <!-- Golden Gate Bridge - Big, iconic, happy red bridge! -->
      <div class="landmark landmark-ggb">
        <svg viewBox="0 0 120 60">
          <!-- Road deck -->
          <path class="bridge-deck" d="M 0,52 L 120,52" stroke-linecap="round"/>

          <!-- Left tower -->
          <path class="bridge-tower" d="M 25,52 L 25,12 M 32,52 L 32,12" stroke-linecap="round"/>
          <path class="bridge-tower" d="M 23,12 L 34,12 M 23,22 L 34,22 M 23,32 L 34,32 M 23,42 L 34,42" stroke-width="2"/>

          <!-- Right tower -->
          <path class="bridge-tower" d="M 88,52 L 88,12 M 95,52 L 95,12" stroke-linecap="round"/>
          <path class="bridge-tower" d="M 86,12 L 97,12 M 86,22 L 97,22 M 86,32 L 97,32 M 86,42 L 97,42" stroke-width="2"/>

          <!-- Main cables (catenary curves) -->
          <path class="bridge-cable" d="M 0,20 Q 28,8 60,6 Q 92,8 120,20" fill="none"/>

          <!-- Suspender cables from main cable to deck -->
          <path class="bridge-cable" d="M 15,17 L 15,52" stroke-width="0.8"/>
          <path class="bridge-cable" d="M 28,10 L 28,52" stroke-width="0.8"/>
          <path class="bridge-cable" d="M 40,8 L 40,52" stroke-width="0.8"/>
          <path class="bridge-cable" d="M 52,7 L 52,52" stroke-width="0.8"/>
          <path class="bridge-cable" d="M 68,7 L 68,52" stroke-width="0.8"/>
          <path class="bridge-cable" d="M 80,8 L 80,52" stroke-width="0.8"/>
          <path class="bridge-cable" d="M 92,10 L 92,52" stroke-width="0.8"/>
          <path class="bridge-cable" d="M 105,17 L 105,52" stroke-width="0.8"/>
        </svg>
      </div>

      <!-- North Bay Redwoods / Muir Woods -->
      <div class="landmark landmark-redwoods">
        <svg width="35" height="45" viewBox="0 0 35 45">
          <path d="M10,45 L10,28 L5,28 L10,18 L7,18 L10,8 L8,8 L10,0 L12,8 L10,8 L13,18 L10,18 L15,28 L10,28 L10,45"/>
          <path d="M22,45 L22,32 L19,32 L22,22 L20,22 L22,14 L24,22 L22,22 L25,32 L22,32 L22,45"/>
          <path d="M30,45 L30,35 L28,35 L30,27 L32,35 L30,35 L30,45"/>
        </svg>
      </div>

      <!-- Mt. Tamalpais -->
      <div class="landmark landmark-tamalpais">Mt. Tam</div>

      <!-- Alcatraz Island -->
      <div class="landmark landmark-alcatraz" title="Alcatraz"></div>

      <!-- Transamerica Pyramid -->
      <div class="landmark landmark-pyramid">
        <svg width="10" height="20" viewBox="0 0 10 20">
          <path d="M5,0 L9,20 L1,20 Z"/>
          <line x1="2.5" y1="14" x2="7.5" y2="14"/>
        </svg>
      </div>

      <!-- Oakland Port Cranes -->
      <div class="landmark landmark-cranes">
        <svg width="30" height="24" viewBox="0 0 30 24">
          <path d="M4,24 L4,5 L15,5 M7,24 L7,7"/>
          <path d="M17,24 L17,8 L27,8 M20,24 L20,10"/>
        </svg>
      </div>

      <!-- Candlestick Point -->
      <div class="landmark landmark-candlestick">Candlestick Pt</div>

      <!-- SFO Airport -->
      <div class="landmark landmark-sfo">SFO</div>

      <!-- Stanford University -->
      <div class="landmark landmark-stanford">Stanford</div>

      <!-- UC Berkeley -->
      <div class="landmark landmark-berkeley">Berkeley</div>

      <!-- In-N-Out locations -->
      <div class="landmark landmark-innout landmark-innout-mv">In-N-Out</div>
      <div class="landmark landmark-innout landmark-innout-sf">In-N-Out</div>

      <!-- Google Campus -->
      <div class="landmark landmark-google">
        <span>G</span><span>o</span><span>o</span><span>g</span><span>l</span><span>e</span>
      </div>

      <!-- East Bay Landmarks -->
      <div class="landmark landmark-oakland">Oakland</div>
      <div class="landmark landmark-diablo">Mt. Diablo</div>
      <div class="landmark landmark-walnutcreek">Walnut Creek</div>
      <div class="landmark landmark-livermore">Livermore</div>
      <div class="landmark landmark-pleasanton">Pleasanton</div>
      <div class="landmark landmark-fremont">Fremont</div>
      <div class="landmark landmark-hayward">Hayward</div>
      <div class="landmark landmark-lakemerritt">Lake Merritt</div>
      <div class="landmark landmark-coliseum">Coliseum</div>

      <!-- South Bay Landmarks -->
      <div class="landmark landmark-sanjose">San Jos</div>
      <div class="landmark landmark-apple">
        <svg width="12" height="14" viewBox="0 0 12 14"><path d="M10.5,5c-0.4-1.5-1.8-2.5-3-2.5c-0.7,0-1.3,0.3-1.8,0.5C5.2,3.2,4.8,3,4.3,3C2.8,3,1.5,4.5,1.5,6.5c0,3,2,6.5,3.5,6.5c0.7,0,1-0.3,1.5-0.3s0.8,0.3,1.5,0.3c1.5,0,3-3,3.5-5C10,7.5,9,6.5,10.5,5z M6,2.5c0.5-1,1.5-1.5,2.5-1.5C8.5,2,7.5,3,6,2.5z"/></svg>
      </div>
      <div class="landmark landmark-santacruz">Santa Cruz</div>

      <!-- North Bay Landmarks -->
      <div class="landmark landmark-napa">Napa Valley</div>
      <div class="landmark landmark-sausalito">Sausalito</div>
      <div class="landmark landmark-sanrafael">San Rafael</div>
      <div class="landmark landmark-winecountry">Wine Country</div>
      <div class="landmark landmark-pointreyes">Pt. Reyes</div>

      <!-- Other Landmarks -->
      <div class="landmark landmark-oaklandairport">OAK</div>
      <div class="landmark landmark-baybridge">
        <svg width="40" height="12" viewBox="0 0 40 12">
          <path d="M0,10 L8,10 L10,4 L14,10 L18,4 L22,10 L26,4 L30,10 L32,4 L40,10" stroke="#8b7355" stroke-width="1.5" fill="none"/>
        </svg>
      </div>
      <div class="landmark landmark-mission">Mission Dist.</div>
    </div>

    <!-- Golf course fairways -->
    <div class="fairways">
      <!-- San Francisco -->
      <a href="/course/tpc-harding-park" class="fairway fw-harding" data-course="TPC Harding Park" data-initial="H"><span class="price-tag loading">...</span></a>
      <a href="/course/tpc-harding-park-fleming-9" class="fairway fw-fleming" data-course="TPC Harding Park - Fleming 9" data-initial="F"><span class="price-tag loading">...</span></a>
      <a href="/course/lincoln-park-golf-course" class="fairway fw-lincoln" data-course="Lincoln Park Golf Course" data-initial="L"><span class="price-tag loading">...</span></a>
      <a href="/course/presidio-golf-course" class="fairway fw-presidio" data-course="Presidio Golf Course" data-initial="P"><span class="price-tag loading">...</span></a>
      <a href="/course/sharp-park-golf-course" class="fairway fw-sharp" data-course="Sharp Park Golf Course" data-initial="S"><span class="price-tag loading">...</span></a>
      <a href="/course/golden-gate-park-golf-course" class="fairway fw-gleneagles" data-course="Golden Gate Park Golf Course" data-initial="G"><span class="price-tag loading">...</span></a>
      <a href="/course/crystal-springs-golf-course" class="fairway fw-crystal" data-course="Crystal Springs Golf Course" data-initial="CS"><span class="price-tag loading">...</span></a>
      <a href="/course/half-moon-bay-old-course" class="fairway fw-hmb-old" data-course="Half Moon Bay - Old Course" data-initial="HO"><span class="price-tag loading">...</span></a>
      <a href="/course/half-moon-bay-ocean-course" class="fairway fw-hmb-ocean" data-course="Half Moon Bay - Ocean Course" data-initial="HM"><span class="price-tag loading">...</span></a>

      <!-- South Bay -->
      <a href="/course/palo-alto-golf-course" class="fairway fw-paloalto" data-course="Palo Alto Golf Course" data-initial="PA"><span class="price-tag loading">...</span></a>
      <a href="/course/baylands-golf-links" class="fairway fw-baylands" data-course="Baylands Golf Links" data-initial="BL"><span class="price-tag loading">...</span></a>
      <a href="/course/santa-teresa-golf-club" class="fairway fw-santateresa" data-course="Santa Teresa Golf Club" data-initial="ST"><span class="price-tag loading">...</span></a>
      <a href="/course/cinnabar-hills-golf-club" class="fairway fw-cinnabar" data-course="Cinnabar Hills Golf Club" data-initial="C"><span class="price-tag loading">...</span></a>
      <a href="/course/deep-cliff-golf-course" class="fairway fw-deepcliff" data-course="Deep Cliff Golf Course" data-initial="D"><span class="price-tag loading">...</span></a>
      <a href="/course/san-jose-municipal-golf-course" class="fairway fw-sanjose" data-course="San Jose Municipal Golf Course" data-initial="SJ"><span class="price-tag loading">...</span></a>
      <a href="/course/pasatiempo-golf-club" class="fairway fw-pasatiempo" data-course="Pasatiempo Golf Club" data-initial="PT"><span class="price-tag loading">...</span></a>
      <a href="/course/de-laveaga-golf-course" class="fairway fw-delaveaga" data-course="De Laveaga Golf Course" data-initial="DL"><span class="price-tag loading">...</span></a>
      <a href="/course/seascape-golf-club" class="fairway fw-seascape" data-course="Seascape Golf Club" data-initial="SC"><span class="price-tag loading">...</span></a>
      <a href="/course/los-lagos-golf-course" class="fairway fw-loslagos" data-course="Los Lagos Golf Course" data-initial="LL"><span class="price-tag loading">...</span></a>
      <a href="/course/gilroy-golf-course" class="fairway fw-gilroy" data-course="Gilroy Golf Course" data-initial="GI"><span class="price-tag loading">...</span></a>
      <a href="/course/pajaro-valley-golf-club" class="fairway fw-pajaro" data-course="Pajaro Valley Golf Club" data-initial="PV"><span class="price-tag loading">...</span></a>
      <a href="/course/salinas-fairways-golf-course" class="fairway fw-salinas" data-course="Salinas Fairways Golf Course" data-initial="SF"><span class="price-tag loading">...</span></a>

      <!-- East Bay -->
      <a href="/course/corica-park-south-course" class="fairway fw-corica" data-course="Corica Park - South Course" data-initial="CS"><span class="price-tag loading">...</span></a>
      <a href="/course/corica-park-north-course" class="fairway fw-corica-n" data-course="Corica Park - North Course" data-initial="CN"><span class="price-tag loading">...</span></a>
      <a href="/course/tilden-park-golf-course" class="fairway fw-tilden" data-course="Tilden Park Golf Course" data-initial="T"><span class="price-tag loading">...</span></a>
      <a href="/course/boundary-oak-golf-course" class="fairway fw-boundary" data-course="Boundary Oak Golf Course" data-initial="B"><span class="price-tag loading">...</span></a>
      <a href="/course/metropolitan-golf-links" class="fairway fw-metropolitan" data-course="Metropolitan Golf Links" data-initial="M"><span class="price-tag loading">...</span></a>
      <a href="/course/poppy-ridge-golf-course" class="fairway fw-poppy" data-course="Poppy Ridge Golf Course" data-initial="PR"><span class="price-tag loading">...</span></a>
      <a href="/course/diablo-creek-golf-course" class="fairway fw-diablo" data-course="Diablo Creek Golf Course" data-initial="DC"><span class="price-tag loading">...</span></a>
      <a href="/course/the-bridges-golf-club" class="fairway fw-bridges" data-course="The Bridges Golf Club" data-initial="BR"><span class="price-tag loading">...</span></a>
      <a href="/course/san-ramon-golf-club" class="fairway fw-sanramon" data-course="San Ramon Golf Club" data-initial="SR"><span class="price-tag loading">...</span></a>
      <a href="/course/las-positas-golf-course" class="fairway fw-laspositas" data-course="Las Positas Golf Course" data-initial="LP"><span class="price-tag loading">...</span></a>
      <a href="/course/wente-vineyards" class="fairway fw-wente" data-course="Wente Vineyards" data-initial="W"><span class="price-tag loading">...</span></a>
      <a href="/course/callippe-preserve-golf-course" class="fairway fw-callippe" data-course="Callippe Preserve Golf Course" data-initial="CA"><span class="price-tag loading">...</span></a>
      <a href="/course/redwood-canyon-golf-course" class="fairway fw-redwood" data-course="Redwood Canyon Golf Course" data-initial="RC"><span class="price-tag loading">...</span></a>

      <!-- North Bay -->
      <a href="/course/peacock-gap-golf-club" class="fairway fw-peacock" data-course="Peacock Gap Golf Club" data-initial="PG"><span class="price-tag loading">...</span></a>
      <a href="/course/indian-valley-golf-club" class="fairway fw-indian" data-course="Indian Valley Golf Club" data-initial="IV"><span class="price-tag loading">...</span></a>
      <a href="/course/stonetree-golf-club" class="fairway fw-stonetree" data-course="StoneTree Golf Club" data-initial="ST"><span class="price-tag loading">...</span></a>
      <a href="/course/mill-valley-golf-course" class="fairway fw-millvalley" data-course="Mill Valley Golf Course" data-initial="MV"><span class="price-tag loading">...</span></a>
      <a href="/course/the-links-at-bodega-harbour" class="fairway fw-bodega" data-course="The Links at Bodega Harbour" data-initial="BH"><span class="price-tag loading">...</span></a>
      <a href="/course/northwood-golf-club" class="fairway fw-northwood" data-course="Northwood Golf Club" data-initial="NW"><span class="price-tag loading">...</span></a>
      <!-- Sonoma County -->
      <a href="/course/rooster-run-golf-club" class="fairway fw-roosterrun" data-course="Rooster Run Golf Club" data-initial="RR"><span class="price-tag loading">...</span></a>
      <a href="/course/bennett-valley-golf-course" class="fairway fw-bennettvalley" data-course="Bennett Valley Golf Course" data-initial="BV"><span class="price-tag loading">...</span></a>
      <a href="/course/windsor-golf-club" class="fairway fw-windsor" data-course="Windsor Golf Club" data-initial="WG"><span class="price-tag loading">...</span></a>
      <a href="/course/valley-of-the-moon-club" class="fairway fw-valleymoon" data-course="Valley of the Moon Club" data-initial="VM"><span class="price-tag loading">...</span></a>
      <a href="/course/sonoma-golf-club" class="fairway fw-sonomagc" data-course="Sonoma Golf Club" data-initial="SG"><span class="price-tag loading">...</span></a>
      <a href="/course/fairgrounds-golf-course" class="fairway fw-fairgrounds" data-course="Fairgrounds Golf Course" data-initial="FG"><span class="price-tag loading">...</span></a>
      <a href="/course/oakmont-golf-club" class="fairway fw-oakmont" data-course="Oakmont Golf Club" data-initial="OM"><span class="price-tag loading">...</span></a>
      <a href="/course/mcinnis-park-golf-center" class="fairway fw-mcinnis" data-course="McInnis Park Golf Center" data-initial="MC"><span class="price-tag loading">...</span></a>

      <!-- Napa Valley -->
      <a href="/course/chardonnay-golf-club" class="fairway fw-chardonnay" data-course="Chardonnay Golf Club" data-initial="CH"><span class="price-tag loading">...</span></a>
      <a href="/course/eagle-vines-golf-club" class="fairway fw-eaglevines" data-course="Eagle Vines Golf Club" data-initial="EV"><span class="price-tag loading">...</span></a>
      <a href="/course/napa-golf-course-at-kennedy-park" class="fairway fw-napakennedy" data-course="Napa Golf Course at Kennedy Park" data-initial="NK"><span class="price-tag loading">...</span></a>
      <a href="/course/vintners-golf-club" class="fairway fw-vintners" data-course="Vintner's Golf Club" data-initial="VG"><span class="price-tag loading">...</span></a>
      <a href="/course/silverado-resort-north-course" class="fairway fw-silverado-n" data-course="Silverado Resort - North Course" data-initial="SN"><span class="price-tag loading">...</span></a>
      <a href="/course/silverado-resort-south-course" class="fairway fw-silverado-s" data-course="Silverado Resort - South Course" data-initial="SS"><span class="price-tag loading">...</span></a>
    </div>

    <!-- Region labels -->
    <div class="region-label label-sf">San Francisco</div>
    <div class="region-label label-sb">South Bay</div>
    <div class="region-label label-eb">East Bay</div>
    <div class="region-label label-ma">North Bay</div>
    <div class="region-label label-napa">Napa</div>
    <div class="region-label label-sonoma">Sonoma</div>
    <div class="region-label label-pacific">Pacific Ocean</div>
    </div><!-- End map-content -->

    <!-- Top title bar -->
    <div class="title-bar">
      <h1 class="map-title">Bay Area Golf</h1>
      <p class="map-subtitle">San Francisco & Vicinity  80+ Public Courses</p>
    </div>

    <!-- Simple Search Link - Links to App -->
    <a href="/app.html" class="search-link" id="search-link">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/>
        <path d="M21 21l-4.35-4.35"/>
      </svg>
      <span>Search tee times...</span>
    </a>

    <!-- DISABLED: Complex search overlay removed to fix map interaction bugs
    <div class="search-overlay" id="search-overlay">
      <div class="search-bar" id="search-bar">
        <!-- Course/Location Field -->
        <div class="search-field course-field" id="course-field">
          <label class="search-field-label">Course</label>
          <input type="text" class="search-field-input" id="course-input" placeholder="Search courses..." autocomplete="off">
          <div class="search-dropdown" id="course-dropdown">
            <!-- Autocomplete results will be populated here -->
          </div>
        </div>

        <!-- Date Field -->
        <div class="search-field" id="date-field">
          <label class="search-field-label">Date</label>
          <input type="text" class="search-field-input" id="date-input" placeholder="Select date" readonly>
          <div class="search-dropdown" id="date-dropdown">
            <div class="calendar-popup" id="calendar-popup">
              <!-- Calendar will be rendered here -->
            </div>
          </div>
        </div>

        <!-- Time Field -->
        <div class="search-field" id="time-field">
          <label class="search-field-label">Time</label>
          <input type="text" class="search-field-input" id="time-input" placeholder="Any time" readonly>
          <div class="search-dropdown" id="time-dropdown">
            <div class="time-slot-option" data-slot="early_bird">
              <div class="time-slot-icon early">
                <svg viewBox="0 0 24 24"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>
              </div>
              <div class="time-slot-info">
                <div class="time-slot-name">Early Bird</div>
                <div class="time-slot-range">5:00 AM - 7:59 AM</div>
              </div>
              <div class="time-slot-check">
                <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
              </div>
            </div>
            <div class="time-slot-option" data-slot="morning">
              <div class="time-slot-icon morning">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
              </div>
              <div class="time-slot-info">
                <div class="time-slot-name">Morning</div>
                <div class="time-slot-range">8:00 AM - 11:59 AM</div>
              </div>
              <div class="time-slot-check">
                <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
              </div>
            </div>
            <div class="time-slot-option" data-slot="afternoon">
              <div class="time-slot-icon afternoon">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
              </div>
              <div class="time-slot-info">
                <div class="time-slot-name">Afternoon</div>
                <div class="time-slot-range">12:00 PM - 3:59 PM</div>
              </div>
              <div class="time-slot-check">
                <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
              </div>
            </div>
            <div class="time-slot-option" data-slot="twilight">
              <div class="time-slot-icon twilight">
                <svg viewBox="0 0 24 24"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>
              </div>
              <div class="time-slot-info">
                <div class="time-slot-name">Twilight</div>
                <div class="time-slot-range">4:00 PM - 7:00 PM</div>
              </div>
              <div class="time-slot-check">
                <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
              </div>
            </div>
          </div>
        </div>

        <!-- Players Field -->
        <div class="search-field" id="players-field">
          <label class="search-field-label">Players</label>
          <input type="text" class="search-field-input" id="players-input" placeholder="Any" readonly>
          <div class="search-dropdown" id="players-dropdown">
            <div class="player-stepper">
              <button class="player-stepper-btn" id="player-minus" type="button">
                <svg viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"/></svg>
              </button>
              <span class="player-stepper-value" id="player-value">1</span>
              <button class="player-stepper-btn" id="player-plus" type="button">
                <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              </button>
            </div>
            <div class="player-quick-options">
              <button class="player-quick-btn selected" data-players="1">1</button>
              <button class="player-quick-btn" data-players="2">2</button>
              <button class="player-quick-btn" data-players="3">3</button>
              <button class="player-quick-btn" data-players="4">4</button>
            </div>
          </div>
        </div>

        <!-- Search Button -->
        <button class="search-button" id="search-button" type="button">
          <svg viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          Search
        </button>
      </div>
    </div>
    END DISABLED SEARCH -->

    <!-- Login button (top right, near compass) -->
    <a href="/account.html" class="login-btn" id="login-btn">
      <svg viewBox="0 0 24 24">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      <span id="login-text">Log In</span>
    </a>

    <!-- Zoom controls - bottom right corner -->
    <div class="zoom-controls">
      <span class="zoom-label">Zoom</span>
      <button class="zoom-btn" id="zoom-in" title="Zoom In">
        <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
      </button>
      <button class="zoom-btn" id="zoom-out" title="Zoom Out">
        <svg viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
      </button>
    </div>

    <!-- Bottom navigation bar -->
    <nav class="nav-bar">
      <a href="/app.html" class="nav-btn primary">
        <svg viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        Tee Times
      </a>
      <a href="/courses.html" class="nav-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 21h18M5 21V7l8-4 8 4v14"></path>
          <path d="M9 21v-6h6v6"></path>
        </svg>
        Courses
      </a>
      <a href="/monterey.html" class="nav-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
        Monterey
      </a>
      <a href="mailto:hello@bayareagolfnow.com" class="nav-btn">
        <svg viewBox="0 0 24 24">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
        Contact
      </a>
    </nav>

    <!-- Legend -->
    <div class="legend">
      <div class="legend-title">Legend</div>
      <div class="legend-item">
        <div class="legend-fairway"></div>
        <span>Golf Course</span>
      </div>
      <div class="legend-item">
        <div class="legend-water"></div>
        <span>Water</span>
      </div>
      <div class="legend-item">
        <div class="legend-contour"></div>
        <span>Contour Line</span>
      </div>
    </div>

    <!-- Scale bar -->
    <div class="scale-bar">
      <div class="scale-bar-line">
        <div class="scale-bar-segment"></div>
        <div class="scale-bar-segment"></div>
        <div class="scale-bar-segment"></div>
        <div class="scale-bar-segment"></div>
      </div>
      <span>Approximate Scale</span>
    </div>

    <!-- Compass rose -->
    <div class="compass-rose">
      <svg viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" fill="none" stroke="#8b7355" stroke-width="1.5"/>
        <circle cx="50" cy="50" r="35" fill="none" stroke="#8b7355" stroke-width="0.5"/>
        <!-- N -->
        <polygon points="50,8 45,30 50,25 55,30" fill="#8b7355"/>
        <text x="50" y="7" text-anchor="middle" fill="#3d3225" font-size="8" font-weight="600" font-family="Playfair Display, serif">N</text>
        <!-- S -->
        <line x1="50" y1="70" x2="50" y2="92" stroke="#8b7355" stroke-width="1"/>
        <text x="50" y="99" text-anchor="middle" fill="#6b5d4d" font-size="6" font-family="serif">S</text>
        <!-- E -->
        <line x1="70" y1="50" x2="92" y2="50" stroke="#8b7355" stroke-width="1"/>
        <text x="97" y="53" text-anchor="middle" fill="#6b5d4d" font-size="6" font-family="serif">E</text>
        <!-- W -->
        <line x1="8" y1="50" x2="30" y2="50" stroke="#8b7355" stroke-width="1"/>
        <text x="4" y="53" text-anchor="middle" fill="#6b5d4d" font-size="6" font-family="serif">W</text>
        <!-- Diagonal lines -->
        <line x1="25" y1="25" x2="35" y2="35" stroke="#8b7355" stroke-width="0.5"/>
        <line x1="75" y1="25" x2="65" y2="35" stroke="#8b7355" stroke-width="0.5"/>
        <line x1="25" y1="75" x2="35" y2="65" stroke="#8b7355" stroke-width="0.5"/>
        <line x1="75" y1="75" x2="65" y2="65" stroke="#8b7355" stroke-width="0.5"/>
        <circle cx="50" cy="50" r="3" fill="#8b7355"/>
      </svg>
    </div>
  </div>

  <script>
    // Load next available tee time prices for each course
    async function loadPrices() {
      try {
        // Fetch cheapest next available tee time per course
        const res = await fetch('/api/tee-times/next-available');
        const teeTimes = await res.json();

        // Build lookup by course name
        const coursePrices = {};
        teeTimes.forEach(tt => {
          coursePrices[tt.course_name] = { price: tt.price, time: tt.time };
        });

        // Update price tags
        document.querySelectorAll('.fairway').forEach(fairway => {
          const courseName = fairway.dataset.course;
          const priceTag = fairway.querySelector('.price-tag');
          if (!priceTag) return;

          const data = coursePrices[courseName];
          if (data && data.price) {
            const shortTime = formatShortTime(data.time);
            priceTag.textContent = `$${Math.round(data.price)}`;
            priceTag.title = `Next: ${shortTime}`;
            priceTag.classList.remove('loading');
          } else {
            priceTag.textContent = '--';
            priceTag.classList.remove('loading');
          }
        });
      } catch (e) {
        console.error('Error loading prices:', e);
        document.querySelectorAll('.price-tag').forEach(tag => {
          tag.textContent = '--';
          tag.classList.remove('loading');
        });
      }
    }

    function formatShortTime(time) {
      if (!time) return '';
      // Handle "7:30AM" format (GolfNow)
      if (time.includes('AM') || time.includes('PM')) {
        return time.toLowerCase().replace('am', 'a').replace('pm', 'p');
      }
      // Handle "07:30" format (24-hour)
      const [h, m] = time.split(':').map(Number);
      const ampm = h >= 12 ? 'p' : 'a';
      const hour = h % 12 || 12;
      return `${hour}:${String(m).padStart(2, '0')}${ampm}`;
    }

    // Load prices on page load
    document.addEventListener('DOMContentLoaded', loadPrices);

    // Check auth state and update login button
    function updateLoginBtn() {
      const authToken = localStorage.getItem('authToken');
      const loginText = document.getElementById('login-text');
      if (loginText) {
        loginText.textContent = authToken ? 'Account' : 'Log In';
      }
    }
    document.addEventListener('DOMContentLoaded', updateLoginBtn);

    // ============================================
    // HOMEPAGE SEARCH BAR FUNCTIONALITY
    // ============================================

    // State
    let coursesCache = [];
    let selectedDate = null;
    let selectedTimeSlots = [];
    let selectedPlayers = 1;
    let selectedCourse = null;
    let highlightedIndex = -1;
    let activeDropdown = null;

    // Helper: Get Pacific timezone date
    function getPacificDate() {
      const now = new Date();
      const pst = new Date(now.toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
      const year = pst.getFullYear();
      const month = String(pst.getMonth() + 1).padStart(2, '0');
      const day = String(pst.getDate()).padStart(2, '0');
      return `${year}-${month}-${day}`;
    }

    // Helper: Format date for display
    function formatDisplayDate(dateStr) {
      if (!dateStr) return '';
      const date = new Date(dateStr + 'T12:00:00');
      const today = new Date();
      const tomorrow = new Date(today);
      tomorrow.setDate(tomorrow.getDate() + 1);

      const isToday = date.toDateString() === today.toDateString();
      const isTomorrow = date.toDateString() === tomorrow.toDateString();

      if (isToday) return 'Today';
      if (isTomorrow) return 'Tomorrow';

      const options = { weekday: 'short', month: 'short', day: 'numeric' };
      return date.toLocaleDateString('en-US', options);
    }

    // Helper: Format time for display
    function formatDisplayTime(time) {
      if (!time) return '';
      // Handle "07:30" format (24-hour)
      const [h, m] = time.split(':').map(Number);
      const ampm = h >= 12 ? 'PM' : 'AM';
      const hour = h % 12 || 12;
      return `${hour}:${String(m).padStart(2, '0')} ${ampm}`;
    }

    // Helper: Format date for short display
    function formatShortDate(dateStr) {
      if (!dateStr) return '';
      const date = new Date(dateStr + 'T12:00:00');
      const options = { month: 'short', day: 'numeric' };
      return date.toLocaleDateString('en-US', options);
    }

    // Fuzzy matching algorithm
    function fuzzyMatch(query, target) {
      if (!query || !target) return { score: 0, matchType: 'none' };

      const normalizedQuery = query.toLowerCase().trim();
      const normalizedTarget = target.toLowerCase();

      // Exact prefix match - highest score
      if (normalizedTarget.startsWith(normalizedQuery)) {
        return { score: 1.0, matchType: 'prefix' };
      }

      // Word boundary match
      const words = normalizedTarget.split(/\s+/);
      for (const word of words) {
        if (word.startsWith(normalizedQuery)) {
          return { score: 0.9, matchType: 'word-start' };
        }
      }

      // Substring match
      if (normalizedTarget.includes(normalizedQuery)) {
        return { score: 0.7, matchType: 'contains' };
      }

      // Levenshtein distance for typo tolerance (only for queries >= 4 chars)
      if (normalizedQuery.length >= 4) {
        const distance = levenshteinDistance(normalizedQuery, normalizedTarget.substring(0, normalizedQuery.length + 2));
        if (distance <= 2) {
          return { score: 0.5 - (distance * 0.1), matchType: 'fuzzy' };
        }
      }

      return { score: 0, matchType: 'none' };
    }

    // Levenshtein distance for typo tolerance
    function levenshteinDistance(a, b) {
      if (a.length === 0) return b.length;
      if (b.length === 0) return a.length;

      const matrix = [];
      for (let i = 0; i <= b.length; i++) {
        matrix[i] = [i];
      }
      for (let j = 0; j <= a.length; j++) {
        matrix[0][j] = j;
      }

      for (let i = 1; i <= b.length; i++) {
        for (let j = 1; j <= a.length; j++) {
          if (b.charAt(i - 1) === a.charAt(j - 1)) {
            matrix[i][j] = matrix[i - 1][j - 1];
          } else {
            matrix[i][j] = Math.min(
              matrix[i - 1][j - 1] + 1,
              matrix[i][j - 1] + 1,
              matrix[i - 1][j] + 1
            );
          }
        }
      }
      return matrix[b.length][a.length];
    }

    // Highlight matched text
    function highlightMatch(text, query) {
      if (!query) return text;
      const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
      return text.replace(regex, '<span class="highlight-match">$1</span>');
    }

    // Load courses for autocomplete
    async function loadCourses() {
      try {
        const res = await fetch('/api/courses');
        coursesCache = await res.json();
      } catch (e) {
        console.error('Error loading courses:', e);
        coursesCache = [];
      }
    }

    // Search courses with fuzzy matching
    function searchCourses(query) {
      if (!query || query.length < 2) return [];

      const results = coursesCache
        .map(course => ({
          ...course,
          match: fuzzyMatch(query, course.name)
        }))
        .filter(course => course.match.score > 0)
        .sort((a, b) => b.match.score - a.match.score)
        .slice(0, 8);

      return results;
    }

    // Render autocomplete dropdown
    function renderAutocomplete(results, query) {
      const dropdown = document.getElementById('course-dropdown');

      if (results.length === 0 && query.length >= 2) {
        dropdown.innerHTML = `
          <div class="dropdown-section">
            <div class="dropdown-section-header">No Results</div>
            <div style="padding: 12px 16px; color: var(--text-muted); font-size: 13px;">
              No courses found matching "${query}"
            </div>
          </div>
        `;
        return;
      }

      if (results.length === 0) {
        // Show popular courses when no query
        const popular = coursesCache.slice(0, 5);
        dropdown.innerHTML = `
          <div class="dropdown-section">
            <div class="dropdown-section-header">Popular Courses</div>
            ${popular.map((course, i) => `
              <div class="dropdown-item ${i === highlightedIndex ? 'highlighted' : ''}" data-course-id="${course.id}" data-course-name="${course.name}">
                <div class="dropdown-item-icon">
                  <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                </div>
                <div class="dropdown-item-content">
                  <div class="dropdown-item-title">${course.name}</div>
                  <div class="dropdown-item-subtitle">${course.city}, ${course.region}</div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
        return;
      }

      dropdown.innerHTML = `
        <div class="dropdown-section">
          <div class="dropdown-section-header">Courses</div>
          ${results.map((course, i) => `
            <div class="dropdown-item ${i === highlightedIndex ? 'highlighted' : ''}" data-course-id="${course.id}" data-course-name="${course.name}">
              <div class="dropdown-item-icon">
                <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
              </div>
              <div class="dropdown-item-content">
                <div class="dropdown-item-title">${highlightMatch(course.name, query)}</div>
                <div class="dropdown-item-subtitle">${course.city}, ${course.region}</div>
              </div>
            </div>
          `).join('')}
        </div>
      `;
    }

    // Render calendar
    function renderCalendar(targetDate) {
      const popup = document.getElementById('calendar-popup');
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      const currentMonth = targetDate ? new Date(targetDate + 'T12:00:00') : new Date();
      currentMonth.setDate(1);

      const year = currentMonth.getFullYear();
      const month = currentMonth.getMonth();

      const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                          'July', 'August', 'September', 'October', 'November', 'December'];
      const dayNames = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];

      // Get first day of month and number of days
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      // Get previous month's days for padding
      const prevMonth = new Date(year, month, 0);
      const prevMonthDays = prevMonth.getDate();

      let daysHtml = '';
      let dayCount = 1;
      let nextMonthDay = 1;

      for (let week = 0; week < 6; week++) {
        for (let day = 0; day < 7; day++) {
          const cellIndex = week * 7 + day;

          if (cellIndex < firstDay) {
            // Previous month
            const prevDay = prevMonthDays - firstDay + cellIndex + 1;
            daysHtml += `<button class="calendar-day outside-month" disabled>${prevDay}</button>`;
          } else if (dayCount > daysInMonth) {
            // Next month
            daysHtml += `<button class="calendar-day outside-month" disabled>${nextMonthDay++}</button>`;
          } else {
            // Current month
            const dateObj = new Date(year, month, dayCount);
            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(dayCount).padStart(2, '0')}`;
            const isToday = dateObj.toDateString() === today.toDateString();
            const isSelected = dateStr === selectedDate;
            const isPast = dateObj < today;

            const classes = ['calendar-day'];
            if (isToday) classes.push('today');
            if (isSelected) classes.push('selected');

            daysHtml += `<button class="${classes.join(' ')}" ${isPast ? 'disabled' : ''} data-date="${dateStr}">${dayCount}</button>`;
            dayCount++;
          }
        }
        if (dayCount > daysInMonth) break;
      }

      popup.innerHTML = `
        <div class="calendar-header">
          <button class="calendar-nav-btn" id="cal-prev" type="button">
            <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>
          </button>
          <span class="calendar-month-year">${monthNames[month]} ${year}</span>
          <button class="calendar-nav-btn" id="cal-next" type="button">
            <svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
          </button>
        </div>
        <div class="calendar-weekdays">
          ${dayNames.map(d => `<span class="calendar-weekday">${d}</span>`).join('')}
        </div>
        <div class="calendar-days">
          ${daysHtml}
        </div>
        <div class="quick-dates">
          <button class="quick-date-btn" data-date="today" type="button">Today</button>
          <button class="quick-date-btn" data-date="tomorrow" type="button">Tomorrow</button>
          <button class="quick-date-btn" data-date="weekend" type="button">Weekend</button>
        </div>
      `;

      // Wire up calendar navigation
      document.getElementById('cal-prev').addEventListener('click', (e) => {
        e.stopPropagation();
        const newDate = new Date(year, month - 1, 1);
        renderCalendar(`${newDate.getFullYear()}-${String(newDate.getMonth() + 1).padStart(2, '0')}-01`);
      });

      document.getElementById('cal-next').addEventListener('click', (e) => {
        e.stopPropagation();
        const newDate = new Date(year, month + 1, 1);
        renderCalendar(`${newDate.getFullYear()}-${String(newDate.getMonth() + 1).padStart(2, '0')}-01`);
      });

      // Wire up day clicks
      popup.querySelectorAll('.calendar-day:not(:disabled):not(.outside-month)').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          selectDate(btn.dataset.date);
        });
      });

      // Wire up quick date buttons
      popup.querySelectorAll('.quick-date-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const today = new Date();
          let date;
          if (btn.dataset.date === 'today') {
            date = today;
          } else if (btn.dataset.date === 'tomorrow') {
            date = new Date(today);
            date.setDate(date.getDate() + 1);
          } else if (btn.dataset.date === 'weekend') {
            date = new Date(today);
            const dayOfWeek = date.getDay();
            const daysUntilSat = (6 - dayOfWeek + 7) % 7 || 7;
            date.setDate(date.getDate() + daysUntilSat);
          }
          const dateStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
          selectDate(dateStr);
        });
      });
    }

    // Select a date
    function selectDate(dateStr) {
      selectedDate = dateStr;
      document.getElementById('date-input').value = formatDisplayDate(dateStr);
      closeDropdown('date-dropdown');
    }

    // Update time slots display
    function updateTimeDisplay() {
      const input = document.getElementById('time-input');
      if (selectedTimeSlots.length === 0) {
        input.value = 'Any time';
      } else if (selectedTimeSlots.length === 4) {
        input.value = 'All day';
      } else {
        const names = {
          early_bird: 'Early',
          morning: 'Morning',
          afternoon: 'Afternoon',
          twilight: 'Twilight'
        };
        input.value = selectedTimeSlots.map(s => names[s]).join(', ');
      }
    }

    // Update player display
    function updatePlayerDisplay() {
      const input = document.getElementById('players-input');
      const valueEl = document.getElementById('player-value');
      input.value = selectedPlayers === 1 ? '1 Player' : `${selectedPlayers} Players`;
      valueEl.textContent = selectedPlayers;

      // Update quick buttons
      document.querySelectorAll('.player-quick-btn').forEach(btn => {
        btn.classList.toggle('selected', parseInt(btn.dataset.players) === selectedPlayers);
      });

      // Update stepper buttons
      document.getElementById('player-minus').disabled = selectedPlayers <= 1;
      document.getElementById('player-plus').disabled = selectedPlayers >= 4;
    }

    // Open dropdown
    function openDropdown(dropdownId) {
      // Close any open dropdown first
      closeAllDropdowns();

      const dropdown = document.getElementById(dropdownId);
      dropdown.classList.add('active');
      activeDropdown = dropdownId;

      // Special handling for calendar
      if (dropdownId === 'date-dropdown') {
        renderCalendar(selectedDate || getPacificDate());
      }
    }

    // Close dropdown
    function closeDropdown(dropdownId) {
      const dropdown = document.getElementById(dropdownId);
      if (dropdown) {
        dropdown.classList.remove('active');
      }
      if (activeDropdown === dropdownId) {
        activeDropdown = null;
      }
    }

    // Close all dropdowns
    function closeAllDropdowns() {
      document.querySelectorAll('.search-dropdown').forEach(d => d.classList.remove('active'));
      activeDropdown = null;
      highlightedIndex = -1;
    }

    // Search tee times
    async function searchTeeTimes() {
      const resultsContainer = document.getElementById('search-results-container');
      const resultsBody = document.getElementById('search-results-body');
      const resultsCount = document.getElementById('search-results-count');

      // Show loading state
      resultsContainer.classList.add('active');
      resultsBody.innerHTML = `
        <div class="search-results-loading">
          <div class="search-results-loading-spinner"></div>
          <span>Searching for tee times...</span>
        </div>
      `;

      // Build query params
      const params = new URLSearchParams();
      params.set('next_available', 'true');
      params.set('limit', '50');

      if (selectedCourse) {
        params.set('course_id', selectedCourse);
      }

      if (selectedDate) {
        params.set('date', selectedDate);
      }

      if (selectedPlayers > 1) {
        params.set('players', selectedPlayers);
      }

      // Time slot filtering
      let minTime = null;
      let maxTime = null;
      if (selectedTimeSlots.length > 0 && selectedTimeSlots.length < 4) {
        const timeRanges = {
          early_bird: { min: '05:00', max: '07:59' },
          morning: { min: '08:00', max: '11:59' },
          afternoon: { min: '12:00', max: '15:59' },
          twilight: { min: '16:00', max: '19:00' }
        };
        // Get the earliest min and latest max from selected slots
        const selectedRanges = selectedTimeSlots.map(s => timeRanges[s]);
        minTime = selectedRanges.reduce((min, r) => r.min < min ? r.min : min, '23:59');
        maxTime = selectedRanges.reduce((max, r) => r.max > max ? r.max : max, '00:00');
        params.set('min_time', minTime);
        params.set('max_time', maxTime);
      }

      try {
        const res = await fetch(`/api/tee-times?${params}&_t=${Date.now()}`);
        const teeTimes = await res.json();

        if (teeTimes.length === 0) {
          resultsCount.innerHTML = 'No tee times found';
          resultsBody.innerHTML = `
            <div class="search-no-results">
              <h3>No tee times available</h3>
              <p>Try adjusting your search criteria or selecting a different date.</p>
            </div>
          `;
          return;
        }

        // Update count
        resultsCount.innerHTML = `<strong>${teeTimes.length}</strong> tee times found`;

        // Render results (limit to 10 for inline display)
        const displayResults = teeTimes.slice(0, 10);
        resultsBody.innerHTML = displayResults.map(tt => `
          <a href="/course/${tt.course_slug || tt.course_id}" class="search-result-card">
            <div class="search-result-time">
              <div class="search-result-time-value">${formatDisplayTime(tt.time)}</div>
              <div class="search-result-time-date">${formatShortDate(tt.date)}</div>
            </div>
            <div class="search-result-info">
              <div class="search-result-name">${tt.course_name}</div>
              <div class="search-result-location">${tt.city}, ${tt.region}</div>
              <div class="search-result-badges">
                <span class="search-result-badge">${tt.holes || 18}H</span>
                ${tt.players ? `<span class="search-result-badge spots">${tt.players} spots</span>` : ''}
              </div>
            </div>
            <div class="search-result-price">
              <div class="search-result-price-value">$${Math.round(tt.price)}</div>
            </div>
          </a>
        `).join('');

      } catch (e) {
        console.error('Search error:', e);
        resultsCount.innerHTML = 'Error';
        resultsBody.innerHTML = `
          <div class="search-no-results">
            <h3>Error loading results</h3>
            <p>Please try again.</p>
          </div>
        `;
      }
    }

    // Initialize search bar
    document.addEventListener('DOMContentLoaded', function() {
      // Mobile search toggle
      const searchOverlay = document.getElementById('search-overlay');
      const searchTrigger = document.getElementById('search-trigger');
      const courseInput = document.getElementById('course-input');

      searchTrigger.addEventListener('click', () => {
        searchOverlay.classList.add('expanded');
        // Focus the course input after animation
        setTimeout(() => courseInput.focus(), 100);
      });

      // Close search on outside click (mobile)
      document.addEventListener('click', (e) => {
        if (window.innerWidth <= 768 &&
            searchOverlay.classList.contains('expanded') &&
            !e.target.closest('.search-bar') &&
            !e.target.closest('.search-trigger') &&
            !e.target.closest('.search-results-container')) {
          searchOverlay.classList.remove('expanded');
        }
      });

      // Load courses for autocomplete
      loadCourses();

      // Set default date to today
      selectedDate = getPacificDate();
      document.getElementById('date-input').value = formatDisplayDate(selectedDate);
      updatePlayerDisplay();

      // Course input handling
      const courseInput = document.getElementById('course-input');
      let debounceTimer;

      courseInput.addEventListener('focus', () => {
        openDropdown('course-dropdown');
        renderAutocomplete([], '');
      });

      courseInput.addEventListener('input', (e) => {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(() => {
          const query = e.target.value.trim();
          const results = searchCourses(query);
          highlightedIndex = -1;
          renderAutocomplete(results, query);
        }, 150);
      });

      courseInput.addEventListener('keydown', (e) => {
        const dropdown = document.getElementById('course-dropdown');
        const items = dropdown.querySelectorAll('.dropdown-item');

        if (e.key === 'ArrowDown') {
          e.preventDefault();
          highlightedIndex = Math.min(highlightedIndex + 1, items.length - 1);
          items.forEach((item, i) => item.classList.toggle('highlighted', i === highlightedIndex));
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          highlightedIndex = Math.max(highlightedIndex - 1, 0);
          items.forEach((item, i) => item.classList.toggle('highlighted', i === highlightedIndex));
        } else if (e.key === 'Enter') {
          e.preventDefault();
          if (highlightedIndex >= 0 && items[highlightedIndex]) {
            const item = items[highlightedIndex];
            selectedCourse = item.dataset.courseId;
            courseInput.value = item.dataset.courseName;
            closeDropdown('course-dropdown');
          }
        } else if (e.key === 'Escape') {
          closeDropdown('course-dropdown');
        }
      });

      // Course dropdown item clicks
      document.getElementById('course-dropdown').addEventListener('click', (e) => {
        const item = e.target.closest('.dropdown-item');
        if (item) {
          selectedCourse = item.dataset.courseId;
          courseInput.value = item.dataset.courseName;
          closeDropdown('course-dropdown');
        }
      });

      // Date field handling
      document.getElementById('date-field').addEventListener('click', (e) => {
        if (!e.target.closest('.search-dropdown')) {
          if (activeDropdown === 'date-dropdown') {
            closeDropdown('date-dropdown');
          } else {
            openDropdown('date-dropdown');
          }
        }
      });

      // Time field handling
      document.getElementById('time-field').addEventListener('click', (e) => {
        if (!e.target.closest('.search-dropdown')) {
          if (activeDropdown === 'time-dropdown') {
            closeDropdown('time-dropdown');
          } else {
            openDropdown('time-dropdown');
          }
        }
      });

      // Time slot selection
      document.querySelectorAll('.time-slot-option').forEach(option => {
        option.addEventListener('click', (e) => {
          e.stopPropagation();
          const slot = option.dataset.slot;
          if (selectedTimeSlots.includes(slot)) {
            selectedTimeSlots = selectedTimeSlots.filter(s => s !== slot);
            option.classList.remove('selected');
          } else {
            selectedTimeSlots.push(slot);
            option.classList.add('selected');
          }
          updateTimeDisplay();
        });
      });

      // Players field handling
      document.getElementById('players-field').addEventListener('click', (e) => {
        if (!e.target.closest('.search-dropdown')) {
          if (activeDropdown === 'players-dropdown') {
            closeDropdown('players-dropdown');
          } else {
            openDropdown('players-dropdown');
          }
        }
      });

      // Player stepper buttons
      document.getElementById('player-minus').addEventListener('click', (e) => {
        e.stopPropagation();
        if (selectedPlayers > 1) {
          selectedPlayers--;
          updatePlayerDisplay();
        }
      });

      document.getElementById('player-plus').addEventListener('click', (e) => {
        e.stopPropagation();
        if (selectedPlayers < 4) {
          selectedPlayers++;
          updatePlayerDisplay();
        }
      });

      // Player quick options
      document.querySelectorAll('.player-quick-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          selectedPlayers = parseInt(btn.dataset.players);
          updatePlayerDisplay();
        });
      });

      // Search button
      document.getElementById('search-button').addEventListener('click', () => {
        closeAllDropdowns();
        searchTeeTimes();
      });

      // Close results button
      document.getElementById('search-results-close').addEventListener('click', () => {
        document.getElementById('search-results-container').classList.remove('active');
      });

      // Close dropdowns when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.search-bar') && !e.target.closest('.search-results-container')) {
          closeAllDropdowns();
        }
        if (!e.target.closest('.search-results-container') && !e.target.closest('.search-button')) {
          // Don't close results on outside click - keep them visible
        }
      });

      // Close dropdowns on Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeAllDropdowns();
        }
      });
    });

    // Draggable map with zoom functionality
    document.addEventListener('DOMContentLoaded', function() {
      const mapContent = document.querySelector('.map-content');
      const container = document.querySelector('.map-container');
      const zoomInBtn = document.getElementById('zoom-in');
      const zoomOutBtn = document.getElementById('zoom-out');

      // === TUNING PARAMETERS ===
      const isMobile = window.innerWidth < 768;

      const config = {
        // Zoom limits
        minZoom: 0.5,                      // Can zoom out to see all courses
        maxZoom: 2.5,                      // How far in
        defaultZoom: isMobile ? 0.7 : 0.55, // Mobile more zoomed to fit screen, desktop wider

        // Button zoom steps (per click)
        zoomInStep: 0.1,         // + button increment
        zoomOutStep: 0.1,        // - button increment (same for symmetry)

        // Scroll wheel sensitivity
        wheelZoomSpeed: 0.05,    // Mouse wheel zoom speed

        // Pinch zoom sensitivity
        pinchZoomSpeed: 0.003,   // Touch pinch sensitivity

        // Drag sensitivity (higher = faster panning)
        dragSpeed: 1.2,          // Mouse drag multiplier
        touchDragSpeed: 1.0,     // Touch drag multiplier

        // Momentum/inertia after drag release
        momentumEnabled: true,
        momentumDecay: 0.92,     // How quickly momentum slows (0-1)
        momentumThreshold: 0.1,  // Min velocity to apply momentum

        // Initial position (centered on Bay Area courses)
        startX: isMobile ? 10 : 8,   // Start at coast edge
        startY: isMobile ? 8 : 5,    // Centered vertically on Bay

        // Pan bounds - keep courses in view when zooming
        boundsWest: -10,         // Allow panning east (inland)
        boundsEast: 18,          // LOCK Pacific - can't pan west past coast
        boundsNorth: -20,        // Allow north (Sonoma)
        boundsSouth: 50          // Allow south (Santa Cruz)
      };

      let isDragging = false;
      let startX, startY;
      let currentX = config.startX;
      let currentY = config.startY;
      let currentZoom = config.defaultZoom;
      let velocityX = 0, velocityY = 0;
      let lastMoveTime = 0;
      let animationFrame = null;

      // Get pan bounds adjusted for zoom level
      function getBounds() {
        return {
          minX: config.boundsWest * currentZoom,
          maxX: config.boundsEast * currentZoom,
          minY: config.boundsNorth * currentZoom,
          maxY: config.boundsSouth * currentZoom
        };
      }

      function updatePosition(animate = false) {
        const bounds = getBounds();
        currentX = Math.max(bounds.minX, Math.min(bounds.maxX, currentX));
        currentY = Math.max(bounds.minY, Math.min(bounds.maxY, currentY));

        // Map size - always fills viewport
        const baseSize = Math.max(100, 200 * currentZoom);
        const offset = (baseSize - 100) / 2;

        if (animate) {
          mapContent.style.transition = 'all 0.2s ease-out';
        } else {
          mapContent.style.transition = 'none';
        }

        mapContent.style.width = `${baseSize}%`;
        mapContent.style.height = `${baseSize}%`;
        mapContent.style.left = `calc(-${offset}% + ${currentX}%)`;
        mapContent.style.top = `calc(-${offset}% + ${currentY}%)`;
      }

      // Smooth animated zoom
      function zoomTo(newZoom, animate = true) {
        const oldZoom = currentZoom;
        currentZoom = Math.max(config.minZoom, Math.min(config.maxZoom, newZoom));
        // Scale position to keep view centered
        const scale = currentZoom / oldZoom;
        currentX *= scale;
        currentY *= scale;
        updatePosition(animate);
      }

      // Momentum animation loop
      function applyMomentum() {
        if (!config.momentumEnabled) return;

        if (Math.abs(velocityX) > config.momentumThreshold ||
            Math.abs(velocityY) > config.momentumThreshold) {
          currentX += velocityX;
          currentY += velocityY;
          velocityX *= config.momentumDecay;
          velocityY *= config.momentumDecay;
          updatePosition();
          animationFrame = requestAnimationFrame(applyMomentum);
        }
      }

      function stopMomentum() {
        if (animationFrame) {
          cancelAnimationFrame(animationFrame);
          animationFrame = null;
        }
        velocityX = 0;
        velocityY = 0;
      }

      // === ZOOM BUTTON CONTROLS ===
      zoomInBtn.addEventListener('click', () => {
        zoomTo(currentZoom + config.zoomInStep);
      });

      zoomOutBtn.addEventListener('click', () => {
        zoomTo(currentZoom - config.zoomOutStep);
      });

      // === MOUSE WHEEL ZOOM ===
      container.addEventListener('wheel', (e) => {
        e.preventDefault();
        const delta = e.deltaY < 0 ? config.wheelZoomSpeed : -config.wheelZoomSpeed;
        zoomTo(currentZoom + delta, false);
      }, { passive: false });

      // === MOUSE DRAG ===
      mapContent.addEventListener('mousedown', (e) => {
        if (e.target.closest('a')) return;
        stopMomentum();
        isDragging = true;
        mapContent.classList.add('dragging');
        startX = e.clientX;
        startY = e.clientY;
        lastMoveTime = Date.now();
        e.preventDefault();
      });

      document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        const now = Date.now();
        const dt = Math.max(1, now - lastMoveTime);

        const dx = (e.clientX - startX) / container.offsetWidth * 100 * config.dragSpeed;
        const dy = (e.clientY - startY) / container.offsetHeight * 100 * config.dragSpeed;

        // Track velocity for momentum
        velocityX = dx / dt * 16; // Normalize to ~60fps
        velocityY = dy / dt * 16;

        currentX += dx;
        currentY += dy;
        startX = e.clientX;
        startY = e.clientY;
        lastMoveTime = now;
        updatePosition();
      });

      document.addEventListener('mouseup', () => {
        if (isDragging) {
          isDragging = false;
          mapContent.classList.remove('dragging');
          applyMomentum();
        }
      });

      // === TOUCH EVENTS ===
      let lastTouchDistance = 0;

      mapContent.addEventListener('touchstart', (e) => {
        stopMomentum();
        if (e.touches.length === 2) {
          lastTouchDistance = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
          );
        } else if (e.touches.length === 1) {
          if (e.target.closest('a')) return;
          isDragging = true;
          mapContent.classList.add('dragging');
          startX = e.touches[0].clientX;
          startY = e.touches[0].clientY;
          lastMoveTime = Date.now();
        }
      }, { passive: true });

      document.addEventListener('touchmove', (e) => {
        if (e.touches.length === 2) {
          const distance = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
          );
          if (lastTouchDistance > 0) {
            const delta = (distance - lastTouchDistance) * config.pinchZoomSpeed;
            zoomTo(currentZoom + delta, false);
          }
          lastTouchDistance = distance;
        } else if (isDragging && e.touches.length === 1) {
          const now = Date.now();
          const dt = Math.max(1, now - lastMoveTime);

          const dx = (e.touches[0].clientX - startX) / container.offsetWidth * 100 * config.touchDragSpeed;
          const dy = (e.touches[0].clientY - startY) / container.offsetHeight * 100 * config.touchDragSpeed;

          velocityX = dx / dt * 16;
          velocityY = dy / dt * 16;

          currentX += dx;
          currentY += dy;
          startX = e.touches[0].clientX;
          startY = e.touches[0].clientY;
          lastMoveTime = now;
          updatePosition();
        }
      }, { passive: true });

      document.addEventListener('touchend', () => {
        if (isDragging) {
          isDragging = false;
          mapContent.classList.remove('dragging');
          applyMomentum();
        }
        lastTouchDistance = 0;
      });

      // Apply initial position
      updatePosition();
    });

    // ==========================================
    // CTA & CONVERSION ENHANCEMENTS
    // ==========================================

    // Ripple effect for buttons
    function createRipple(event) {
      const button = event.currentTarget;
      const rect = button.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const x = event.clientX - rect.left - size / 2;
      const y = event.clientY - rect.top - size / 2;

      const ripple = document.createElement('span');
      ripple.className = 'ripple';
      ripple.style.width = ripple.style.height = `${size}px`;
      ripple.style.left = `${x}px`;
      ripple.style.top = `${y}px`;

      button.appendChild(ripple);
      setTimeout(() => ripple.remove(), 600);
    }

    // Add ripple effect on click to primary buttons
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.nav-btn.primary');
      if (btn) {
        createRipple(e);
      }
    });

    // Register Service Worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('SW registered'))
          .catch(err => console.log('SW registration failed:', err));
      });
    }
  </script>
  <script src="/js/analytics.js"></script>

  <!-- SEO Footer Links -->
  <footer style="position:fixed;bottom:0;left:0;right:0;background:#2d5a27;color:white;padding:8px;text-align:center;font-size:11px;z-index:100;">
    <a href="/sf-golf" style="color:#a8d4a0;margin:0 8px;">SF Golf</a>
    <a href="/east-bay-golf" style="color:#a8d4a0;margin:0 8px;">East Bay</a>
    <a href="/south-bay-golf" style="color:#a8d4a0;margin:0 8px;">South Bay</a>
    <a href="/north-bay-golf" style="color:#a8d4a0;margin:0 8px;">North Bay</a>
    <a href="/napa-golf" style="color:#a8d4a0;margin:0 8px;">Napa</a>
    <a href="/monterey-golf" style="color:#a8d4a0;margin:0 8px;">Monterey</a>
    <a href="/sonoma-golf" style="color:#a8d4a0;margin:0 8px;">Sonoma</a>
    <a href="/sacramento-golf" style="color:#a8d4a0;margin:0 8px;">Sacramento</a>
  </footer>
</body>
</html>
