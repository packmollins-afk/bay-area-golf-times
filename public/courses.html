<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">

  <!-- Primary Meta Tags -->
  <title>Bay Area Golf Courses | 40+ Public Courses in San Francisco Bay Area</title>
  <meta name="title" content="Bay Area Golf Courses | 40+ Public Courses in San Francisco Bay Area">
  <meta name="description" content="Browse 40+ public golf courses across San Francisco, South Bay, East Bay, North Bay, and Napa. View course details, ratings, yardage, slope ratings, and book tee times.">
  <meta name="keywords" content="bay area golf courses, public golf courses san francisco, golf courses near me, east bay golf courses, south bay golf courses, north bay golf courses, napa golf courses, california golf">
  <meta name="robots" content="index, follow">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://bayareagolf.now/courses.html">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://bayareagolf.now/courses.html">
  <meta property="og:title" content="Bay Area Golf Courses | 40+ Public Courses">
  <meta property="og:description" content="Browse 40+ public golf courses across San Francisco Bay Area. View ratings, yardage, and book tee times.">
  <meta property="og:image" content="https://bayareagolf.now/og-image.svg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Bay Area Golf">
  <meta property="og:locale" content="en_US">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://bayareagolf.now/courses.html">
  <meta name="twitter:title" content="Bay Area Golf Courses | 40+ Public Courses">
  <meta name="twitter:description" content="Browse 40+ public golf courses across San Francisco Bay Area. View ratings and book tee times.">
  <meta name="twitter:image" content="https://bayareagolf.now/og-image.svg">

  <!-- Geo Meta Tags -->
  <meta name="geo.region" content="US-CA">
  <meta name="geo.placename" content="San Francisco Bay Area">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <meta name="theme-color" content="#2d5a27">
  
  <!-- PWA / iOS App -->
  <link rel="manifest" href="/manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Bay Area Golf">
  <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "Bay Area Golf Courses",
    "description": "Directory of 40+ public golf courses in the San Francisco Bay Area",
    "url": "https://bayareagolf.now/courses.html",
    "mainEntity": {
      "@type": "ItemList",
      "name": "Public Golf Courses in Bay Area",
      "numberOfItems": 40,
      "itemListOrder": "https://schema.org/ItemListUnordered"
    },
    "breadcrumb": {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://bayareagolf.now/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Courses",
          "item": "https://bayareagolf.now/courses.html"
        }
      ]
    }
  }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2d5a27;
      --primary-light: #4a7a3f;
      --primary-dark: #1a3d17;
      --bg: #f4f1e8;
      --bg-paper: #f9f6ef;
      --card-bg: #fffef9;
      --text: #3d2914;
      --text-muted: #6b5344;
      --border: #c4a882;
      --border-light: #ddd0bc;
      --gold: #b8860b;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Source Serif 4', Georgia, serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }
    .container { max-width: 900px; margin: 0 auto; padding: 0 20px; }

    /* Header */
    header {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary));
      color: #f4f1e8;
      padding: 24px 0;
      border-bottom: 4px solid var(--border);
    }
    header .container { display: flex; justify-content: space-between; align-items: center; }
    header h1 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.8rem;
      font-weight: 700;
    }
    .header-nav {
      display: flex;
      gap: 10px;
    }
    .nav-btn {
      color: #f4f1e8;
      text-decoration: none;
      font-family: 'Playfair Display', Georgia, serif;
      padding: 8px 14px;
      border: 2px solid rgba(255,255,255,0.5);
      border-radius: 4px;
      transition: all 0.2s;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .nav-btn:hover { background: rgba(255,255,255,0.1); border-color: #fff; }
    .nav-btn.active { background: rgba(255,255,255,0.15); border-color: #fff; }
    .nav-btn svg { width: 16px; height: 16px; }

    /* Search & Controls */
    .controls {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 8px;
      border: 2px solid var(--border-light);
      margin-bottom: 24px;
    }

    .search-row {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }
    .search-input {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid var(--border-light);
      border-radius: 6px;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 1rem;
      background: var(--bg-paper);
    }
    .search-input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .filter-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    .filter-group {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .filter-group label {
      font-family: 'Playfair Display', Georgia, serif;
      font-weight: 600;
      font-size: 0.9rem;
    }
    .filter-group select {
      padding: 8px 12px;
      border: 2px solid var(--border-light);
      border-radius: 4px;
      font-family: 'Source Serif 4', Georgia, serif;
      background: var(--bg-paper);
    }
    .filter-group input[type="text"] {
      width: 80px;
      padding: 8px 12px;
      border: 2px solid var(--border-light);
      border-radius: 4px;
      font-family: 'Source Serif 4', Georgia, serif;
      background: var(--bg-paper);
    }

    .staff-picks-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: var(--bg-paper);
      border: 2px solid var(--border-light);
      border-radius: 20px;
      cursor: pointer;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 0.9rem;
      font-weight: 600;
      transition: all 0.2s;
    }
    .staff-picks-toggle:hover { border-color: var(--gold); }
    .staff-picks-toggle.active {
      background: var(--gold);
      color: #fff;
      border-color: #a37700;
    }
    .staff-picks-toggle svg {
      width: 16px;
      height: 16px;
    }

    /* Region chips */
    .region-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid var(--border-light);
    }
    .region-chip {
      padding: 6px 14px;
      background: var(--bg-paper);
      border: 2px solid var(--border-light);
      border-radius: 20px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .region-chip:hover { background: #e8efe6; border-color: var(--primary); }
    .region-chip.active { background: var(--primary); color: #f4f1e8; border-color: var(--primary-dark); }

    /* Course count */
    .course-count {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    /* Course list */
    .course-list {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .course-item {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px 20px;
      background: var(--card-bg);
      border: 2px solid var(--border-light);
      border-radius: 6px;
      text-decoration: none;
      color: inherit;
      transition: all 0.2s;
    }
    .course-item:hover {
      border-color: var(--primary);
      transform: translateX(4px);
    }

    .course-item.staff-pick {
      border-left: 4px solid var(--gold);
    }

    .staff-badge {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: var(--gold);
      border-radius: 50%;
      flex-shrink: 0;
    }
    .staff-badge svg {
      width: 14px;
      height: 14px;
      stroke: #fff;
      fill: #fff;
    }

    .course-info { flex: 1; min-width: 0; }
    .course-name {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .course-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    .course-meta span { display: flex; align-items: center; gap: 4px; }

    .course-rating {
      display: flex;
      align-items: center;
      gap: 4px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--gold);
    }
    .course-rating svg {
      width: 18px;
      height: 18px;
      fill: var(--gold);
      stroke: var(--gold);
    }

    .course-arrow {
      color: var(--text-muted);
      transition: all 0.2s ease;
    }

    .course-item:hover .course-arrow {
      color: var(--primary);
      transform: translateX(4px);
    }

    /* Price Badge */
    .course-price {
      display: flex;
      align-items: baseline;
      gap: 4px;
      padding: 6px 12px;
      background: rgba(45, 90, 39, 0.08);
      border-radius: 6px;
      flex-shrink: 0;
    }
    .course-price .from-label {
      font-size: 0.75rem;
      color: var(--text-muted);
    }
    .course-price .price-value {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1rem;
      font-weight: 700;
      color: var(--primary);
    }

    /* Availability Indicator */
    .course-availability {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
      font-weight: 500;
      flex-shrink: 0;
    }
    .availability-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .course-availability.available .availability-dot {
      background: #10B981;
      box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
    }
    .course-availability.available .availability-text {
      color: #059669;
    }
    .course-availability.limited .availability-dot {
      background: #F59E0B;
      box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.2);
      animation: pulse-availability 2s infinite;
    }
    .course-availability.limited .availability-text {
      color: #D97706;
    }
    .course-availability.sold-out .availability-dot {
      background: #6B7280;
    }
    .course-availability.sold-out .availability-text {
      color: #6B7280;
    }
    @keyframes pulse-availability {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Difficulty Badge */
    .difficulty-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      background: var(--bg-paper);
      border: 1px solid var(--border-light);
      border-radius: 4px;
      font-size: 0.75rem;
      color: var(--text-muted);
    }
    .difficulty-badge.easy { border-color: #10B981; color: #059669; background: #ecfdf5; }
    .difficulty-badge.moderate { border-color: #F59E0B; color: #D97706; background: #fffbeb; }
    .difficulty-badge.challenging { border-color: #EF4444; color: #DC2626; background: #fef2f2; }

    /* Urgency Badge */
    .urgency-badge {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      background: linear-gradient(90deg, #EF4444, #DC2626);
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 600;
      color: #fff;
      flex-shrink: 0;
    }
    .urgency-badge svg {
      width: 12px;
      height: 12px;
      animation: bounce-urgency 1s infinite;
    }
    @keyframes bounce-urgency {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-2px); }
    }

    /* Enhanced hover states */
    .course-item {
      transition: all 0.2s ease;
    }
    .course-item:hover {
      border-color: var(--primary);
      transform: translateX(4px);
      box-shadow: 0 4px 12px rgba(45, 90, 39, 0.1);
    }
    .course-item:active {
      transform: translateX(2px) scale(0.99);
    }

    /* Mobile responsive */
    @media (max-width: 600px) {
      .course-item {
        flex-wrap: wrap;
        gap: 10px;
        padding: 14px 16px;
      }
      .course-info {
        width: 100%;
      }
      .course-meta {
        gap: 8px;
      }
      .course-price {
        padding: 4px 10px;
      }
      .course-availability {
        font-size: 0.75rem;
      }
    }

    /* View Details Button */
    .course-view-btn {
      display: none;
      padding: 10px 18px;
      background: linear-gradient(135deg, #10B981 0%, #059669 100%);
      color: #fff;
      border-radius: 8px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 0.85rem;
      font-weight: 700;
      white-space: nowrap;
      box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .course-item:hover .course-view-btn {
      display: inline-block;
    }

    .course-item:hover .course-arrow {
      display: none;
    }

    .course-view-btn:hover {
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 14px rgba(16, 185, 129, 0.4);
    }

    /* Ripple effect */
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      transform: scale(0);
      animation: ripple-anim 0.6s ease-out;
      pointer-events: none;
    }

    @keyframes ripple-anim {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    /* Loading */
    .loading { text-align: center; padding: 60px; color: var(--text-muted); }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
    }
    .empty-state h3 {
      font-family: 'Playfair Display', Georgia, serif;
      margin-bottom: 8px;
      color: var(--text);
    }

    /* Mobile */
    @media (max-width: 600px) {
      .search-row { flex-direction: column; }
      .filter-row { flex-direction: column; align-items: stretch; }
      .filter-group { justify-content: space-between; }
      .course-item { padding: 14px 16px; }
      .course-rating { font-size: 1rem; }
      .region-chips { gap: 6px; flex-wrap: nowrap; justify-content: space-between; }
      .region-chip { padding: 5px 10px; font-size: 0.75rem; flex: 1; text-align: center; }
    }

    /* ========================================
       MOBILE OPTIMIZATIONS
       ======================================== */

    /* Safe area inset CSS variables */
    :root {
      --safe-area-top: env(safe-area-inset-top, 0px);
      --safe-area-right: env(safe-area-inset-right, 0px);
      --safe-area-bottom: env(safe-area-inset-bottom, 0px);
      --safe-area-left: env(safe-area-inset-left, 0px);
    }

    /* Sticky mobile header */
    @media (max-width: 768px) {
      header {
        position: sticky;
        top: 0;
        z-index: 100;
        padding: 12px 0;
      }

      @supports (padding-top: env(safe-area-inset-top)) {
        header {
          padding-top: calc(12px + var(--safe-area-top));
        }
      }

      header h1 {
        font-size: 1.2rem;
      }

      .header-nav {
        display: none;
      }

      /* Main content needs padding for bottom nav */
      main.container {
        padding-bottom: calc(80px + var(--safe-area-bottom));
      }
    }

    /* Bottom Navigation Bar for Mobile */
    .mobile-bottom-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      background: linear-gradient(135deg, var(--primary-dark), var(--primary));
      border-top: 2px solid var(--border);
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
      padding: 8px 12px;
      padding-bottom: calc(8px + var(--safe-area-bottom));
    }

    @media (max-width: 768px) {
      .mobile-bottom-nav {
        display: flex;
        justify-content: space-around;
        align-items: center;
      }

      .mobile-menu-btn {
        display: flex;
      }
    }

    .mobile-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      color: rgba(255, 255, 255, 0.7);
      padding: 8px 12px;
      min-width: 64px;
      min-height: 52px;
      border-radius: 8px;
      transition: all 0.2s ease;
      -webkit-tap-highlight-color: transparent;
    }

    .mobile-nav-item:active {
      transform: scale(0.95);
      background: rgba(255, 255, 255, 0.1);
    }

    .mobile-nav-item.active {
      color: #fff;
      background: rgba(255, 255, 255, 0.15);
    }

    .mobile-nav-item svg {
      width: 24px;
      height: 24px;
      margin-bottom: 4px;
      stroke-width: 2;
    }

    .mobile-nav-item span {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 0.65rem;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    /* Hamburger Menu Button */
    .mobile-menu-btn {
      display: none;
      width: 44px;
      height: 44px;
      padding: 10px;
      background: transparent;
      border: 2px solid rgba(255, 255, 255, 0.5);
      border-radius: 6px;
      cursor: pointer;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .mobile-menu-btn:hover,
    .mobile-menu-btn:active {
      background: rgba(255, 255, 255, 0.1);
      border-color: #fff;
    }

    .mobile-menu-btn svg {
      width: 24px;
      height: 24px;
      stroke: #f4f1e8;
      stroke-width: 2;
    }

    /* Mobile Slide-Out Menu */
    .mobile-menu-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 2000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .mobile-menu-overlay.active {
      display: block;
      opacity: 1;
    }

    .mobile-menu-panel {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      width: 280px;
      max-width: 85vw;
      background: var(--card-bg);
      z-index: 2001;
      transform: translateX(100%);
      transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
      display: flex;
      flex-direction: column;
      padding-top: var(--safe-area-top);
      padding-bottom: var(--safe-area-bottom);
    }

    .mobile-menu-overlay.active .mobile-menu-panel {
      transform: translateX(0);
    }

    .mobile-menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 2px solid var(--border-light);
    }

    .mobile-menu-header h2 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.2rem;
      color: var(--text);
    }

    .mobile-menu-close {
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .mobile-menu-close:hover,
    .mobile-menu-close:active {
      background: var(--bg-paper);
    }

    .mobile-menu-close svg {
      width: 24px;
      height: 24px;
      stroke: var(--text);
      stroke-width: 2;
    }

    .mobile-menu-links {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
    }

    .mobile-menu-link {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      text-decoration: none;
      color: var(--text);
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 8px;
      transition: all 0.2s;
      min-height: 56px;
    }

    .mobile-menu-link:hover,
    .mobile-menu-link:active {
      background: var(--bg-paper);
    }

    .mobile-menu-link.active {
      background: var(--primary);
      color: #f4f1e8;
    }

    .mobile-menu-link svg {
      width: 24px;
      height: 24px;
      stroke-width: 2;
    }

    /* Touch-friendly improvements */
    @media (max-width: 768px) {
      /* Minimum 44x44px touch targets */
      .region-chip,
      .staff-picks-toggle {
        min-height: 44px;
        min-width: 44px;
      }

      .filter-group select,
      .filter-group input,
      .search-input {
        min-height: 44px;
        font-size: 16px; /* Prevents zoom on iOS */
      }

      .course-item {
        min-height: 60px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Bay Area Golf</h1>
      <nav class="header-nav">
        <a href="/" class="nav-btn">Home</a>
        <a href="/app.html" class="nav-btn">Tee Times</a>
        <a href="/courses.html" class="nav-btn active">Courses</a>
      </nav>
      <!-- Mobile hamburger menu button -->
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Open menu" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </header>

  <!-- Mobile Slide-Out Menu -->
  <div class="mobile-menu-overlay" id="mobile-menu-overlay" onclick="closeMobileMenu()">
    <div class="mobile-menu-panel" onclick="event.stopPropagation()">
      <div class="mobile-menu-header">
        <h2>Menu</h2>
        <button class="mobile-menu-close" onclick="closeMobileMenu()" aria-label="Close menu">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <nav class="mobile-menu-links">
        <a href="/" class="mobile-menu-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          Home
        </a>
        <a href="/app.html" class="mobile-menu-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          Search Tee Times
        </a>
        <a href="/" class="mobile-menu-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
            <line x1="8" y1="2" x2="8" y2="18"></line>
            <line x1="16" y1="6" x2="16" y2="22"></line>
          </svg>
          Map View
        </a>
        <a href="/courses.html" class="mobile-menu-link active">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
          </svg>
          All Courses
        </a>
        <a href="/account.html" class="mobile-menu-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          Account
        </a>
      </nav>
    </div>
  </div>

  <main class="container" style="padding-top: 24px;">
    <div class="controls">
      <div class="search-row">
        <input type="text" class="search-input" id="search" placeholder="Search courses by name or city..." oninput="filterCourses()">
      </div>

      <div class="filter-row">
        <button class="staff-picks-toggle" id="staff-picks-btn" onclick="toggleStaffPicks()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
          </svg>
          Staff Picks
        </button>

        <div class="filter-group">
          <label>Sort:</label>
          <select id="sort" onchange="filterCourses()">
            <option value="name-asc">Name (A-Z)</option>
            <option value="name-desc">Name (Z-A)</option>
            <option value="rating">Rating (Highest)</option>
            <option value="yardage">Yardage (Longest)</option>
            <option value="slope">Difficulty (Slope)</option>
            <option value="distance">Nearest to ZIP</option>
          </select>
        </div>

        <div class="filter-group" id="zip-group" style="display: none;">
          <label>ZIP:</label>
          <input type="text" id="zip" placeholder="94102" maxlength="5" oninput="filterCourses()">
        </div>
      </div>

      <div class="region-chips">
        <button class="region-chip active" data-region="" onclick="selectRegion(this, '')">All</button>
        <button class="region-chip" data-region="San Francisco" onclick="selectRegion(this, 'San Francisco')">SF</button>
        <button class="region-chip" data-region="South Bay" onclick="selectRegion(this, 'South Bay')">South Bay</button>
        <button class="region-chip" data-region="East Bay" onclick="selectRegion(this, 'East Bay')">East Bay</button>
        <button class="region-chip" data-region="North Bay" onclick="selectRegion(this, 'North Bay')">North Bay</button>
        <button class="region-chip" data-region="Napa" onclick="selectRegion(this, 'Napa')">Napa</button>
        <button class="region-chip" data-region="Sonoma" onclick="selectRegion(this, 'Sonoma')">Sonoma</button>
        <button class="region-chip" data-region="Monterey" onclick="selectRegion(this, 'Monterey')">Monterey</button>
      </div>
    </div>

    <div class="course-count" id="course-count"></div>

    <div id="course-list" class="course-list">
      <div class="loading">Loading courses...</div>
    </div>
  </main>

  <script>
    const API_BASE = '/api';
    let allCourses = [];
    let selectedRegion = '';
    let staffPicksOnly = false;

    // ZIP code coordinates (approximate centers)
    const zipCoords = {
      '94102': { lat: 37.7830, lng: -122.4168 }, // SF downtown
      '94103': { lat: 37.7726, lng: -122.4099 },
      '94104': { lat: 37.7914, lng: -122.4019 },
      '94105': { lat: 37.7894, lng: -122.3929 },
      '94107': { lat: 37.7621, lng: -122.3971 },
      '94108': { lat: 37.7929, lng: -122.4075 },
      '94109': { lat: 37.7942, lng: -122.4211 },
      '94110': { lat: 37.7486, lng: -122.4153 },
      '94111': { lat: 37.7989, lng: -122.3999 },
      '94112': { lat: 37.7210, lng: -122.4429 },
      '94114': { lat: 37.7586, lng: -122.4355 },
      '94115': { lat: 37.7858, lng: -122.4378 },
      '94116': { lat: 37.7436, lng: -122.4858 },
      '94117': { lat: 37.7701, lng: -122.4409 },
      '94118': { lat: 37.7817, lng: -122.4612 },
      '94121': { lat: 37.7790, lng: -122.4929 },
      '94122': { lat: 37.7589, lng: -122.4847 },
      '94123': { lat: 37.8008, lng: -122.4375 },
      '94124': { lat: 37.7316, lng: -122.3879 },
      '94127': { lat: 37.7352, lng: -122.4583 },
      '94129': { lat: 37.8005, lng: -122.4647 },
      '94130': { lat: 37.8226, lng: -122.3711 },
      '94131': { lat: 37.7418, lng: -122.4375 },
      '94132': { lat: 37.7216, lng: -122.4769 },
      '94133': { lat: 37.8002, lng: -122.4103 },
      '94134': { lat: 37.7191, lng: -122.4133 },
      '94301': { lat: 37.4443, lng: -122.1505 }, // Palo Alto
      '94040': { lat: 37.3861, lng: -122.0839 }, // Mountain View
      '94086': { lat: 37.3747, lng: -122.0372 }, // Sunnyvale
      '94087': { lat: 37.3512, lng: -122.0321 },
      '95014': { lat: 37.3182, lng: -122.0446 }, // Cupertino
      '95050': { lat: 37.3548, lng: -121.9552 }, // Santa Clara
      '95110': { lat: 37.3486, lng: -121.9018 }, // San Jose
      '95112': { lat: 37.3543, lng: -121.8881 },
      '95120': { lat: 37.2238, lng: -121.8358 },
      '94501': { lat: 37.7652, lng: -122.2416 }, // Alameda
      '94601': { lat: 37.7752, lng: -122.2156 }, // Oakland
      '94602': { lat: 37.8004, lng: -122.2108 },
      '94610': { lat: 37.8118, lng: -122.2448 },
      '94704': { lat: 37.8676, lng: -122.2570 }, // Berkeley
      '94901': { lat: 37.9735, lng: -122.5311 }, // San Rafael
      '94920': { lat: 37.8817, lng: -122.4998 }, // Tiburon
      '94925': { lat: 37.9282, lng: -122.5111 }, // Corte Madera
      '94941': { lat: 37.9065, lng: -122.5322 }, // Mill Valley
      '94947': { lat: 38.1074, lng: -122.5697 }, // Novato
    };

    async function loadCourses() {
      try {
        const res = await fetch(`${API_BASE}/courses?all=true&_t=${Date.now()}`);
        allCourses = await res.json();
        filterCourses();
      } catch (e) {
        document.getElementById('course-list').innerHTML = '<div class="empty-state"><h3>Error loading courses</h3><p>Please try again later.</p></div>';
      }
    }

    function selectRegion(btn, region) {
      selectedRegion = region;
      document.querySelectorAll('.region-chip').forEach(c => c.classList.remove('active'));
      btn.classList.add('active');
      filterCourses();
    }

    function toggleStaffPicks() {
      staffPicksOnly = !staffPicksOnly;
      document.getElementById('staff-picks-btn').classList.toggle('active', staffPicksOnly);
      filterCourses();
    }

    function getDistance(lat1, lng1, lat2, lng2) {
      // Haversine formula
      const R = 3959; // Earth radius in miles
      const dLat = (lat2 - lat1) * Math.PI / 180;
      const dLng = (lng2 - lng1) * Math.PI / 180;
      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLng/2) * Math.sin(dLng/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      return R * c;
    }

    function filterCourses() {
      const searchTerm = document.getElementById('search').value.toLowerCase();
      const sortBy = document.getElementById('sort').value;
      const zip = document.getElementById('zip').value;

      // Show/hide ZIP input based on sort selection
      document.getElementById('zip-group').style.display = sortBy === 'distance' ? 'flex' : 'none';

      let courses = [...allCourses];

      // Filter by search
      if (searchTerm) {
        courses = courses.filter(c =>
          c.name.toLowerCase().includes(searchTerm) ||
          c.city.toLowerCase().includes(searchTerm)
        );
      }

      // Filter by region
      if (selectedRegion) {
        courses = courses.filter(c => c.region === selectedRegion);
      }

      // Filter by staff picks
      if (staffPicksOnly) {
        courses = courses.filter(c => c.is_staff_pick);
      }

      // Sort
      switch (sortBy) {
        case 'name-asc':
          courses.sort((a, b) => a.name.localeCompare(b.name));
          break;
        case 'name-desc':
          courses.sort((a, b) => b.name.localeCompare(a.name));
          break;
        case 'rating':
          courses.sort((a, b) => (b.avg_rating || 0) - (a.avg_rating || 0));
          break;
        case 'yardage':
          courses.sort((a, b) => (b.yardage || 0) - (a.yardage || 0));
          break;
        case 'slope':
          courses.sort((a, b) => (b.slope_rating || 0) - (a.slope_rating || 0));
          break;
        case 'distance':
          if (zip && zipCoords[zip]) {
            const origin = zipCoords[zip];
            courses.forEach(c => {
              c._distance = c.latitude && c.longitude
                ? getDistance(origin.lat, origin.lng, c.latitude, c.longitude)
                : 999;
            });
            courses.sort((a, b) => a._distance - b._distance);
          }
          break;
      }

      renderCourses(courses, sortBy === 'distance' && zip && zipCoords[zip]);
    }

    function renderCourses(courses, showDistance = false) {
      const countEl = document.getElementById('course-count');
      countEl.textContent = `${courses.length} course${courses.length !== 1 ? 's' : ''} found`;

      if (courses.length === 0) {
        document.getElementById('course-list').innerHTML = `
          <div class="empty-state">
            <h3>No courses found</h3>
            <p>Try adjusting your search or filters.</p>
          </div>
        `;
        return;
      }

      document.getElementById('course-list').innerHTML = courses.map(course => {
        // Get difficulty based on slope rating
        let difficultyClass = '';
        let difficultyText = '';
        if (course.slope_rating) {
          if (course.slope_rating < 115) {
            difficultyClass = 'easy';
            difficultyText = 'Beginner Friendly';
          } else if (course.slope_rating < 130) {
            difficultyClass = 'moderate';
            difficultyText = 'Moderate';
          } else {
            difficultyClass = 'challenging';
            difficultyText = 'Challenging';
          }
        }

        // Price display - use next_price if available
        const minPrice = course.next_price || course.min_price;
        const priceDisplay = minPrice ? `$${Math.round(minPrice)}` : '';

        // Get availability status
        const teeTimeCount = course.tee_time_count || 0;
        let availabilityClass = 'available';
        let availabilityText = 'Available';
        if (teeTimeCount === 0) {
          availabilityClass = 'sold-out';
          availabilityText = 'Check times';
        } else if (teeTimeCount < 5) {
          availabilityClass = 'limited';
          availabilityText = `${teeTimeCount} left`;
        }

        // Urgency indicator - show if less than 3 spots
        const showUrgency = teeTimeCount > 0 && teeTimeCount <= 3;

        return `
          <a href="/course/${course.slug}" class="course-item ${course.is_staff_pick ? 'staff-pick' : ''}">
            ${course.is_staff_pick ? `
              <div class="staff-badge" title="Staff Pick">
                <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
              </div>
            ` : ''}
            <div class="course-info">
              <div class="course-name">${course.name}</div>
              <div class="course-meta">
                <span>${course.city}, ${course.region}</span>
                <span>${course.holes} holes</span>
                ${course.par ? `<span>Par ${course.par}</span>` : ''}
                ${showDistance && course._distance < 999 ? `<span>${course._distance.toFixed(1)} mi</span>` : ''}
                ${difficultyText ? `<span class="difficulty-badge ${difficultyClass}">${difficultyText}</span>` : ''}
              </div>
            </div>
            ${priceDisplay ? `
              <div class="course-price">
                <span class="from-label">from</span>
                <span class="price-value">${priceDisplay}</span>
              </div>
            ` : ''}
            <div class="course-availability ${availabilityClass}">
              <span class="availability-dot"></span>
              <span class="availability-text">${availabilityText}</span>
            </div>
            ${showUrgency ? `
              <div class="urgency-badge">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                ${teeTimeCount} left!
              </div>
            ` : ''}
            ${course.avg_rating ? `
              <div class="course-rating">
                <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                ${course.avg_rating.toFixed(1)}
              </div>
            ` : ''}
            <span class="course-view-btn">View Details</span>
            <span class="course-arrow">â†’</span>
          </a>
        `;
      }).join('');
    }

    loadCourses();
  </script>
  <script src="/js/analytics.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('SW registered'))
          .catch(err => console.log('SW registration failed:', err));
      });
    }
  </script>

  <!-- Mobile Bottom Navigation Bar -->
  <nav class="mobile-bottom-nav" aria-label="Mobile navigation">
    <a href="/" class="mobile-nav-item">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
      <span>Home</span>
    </a>
    <a href="/app.html" class="mobile-nav-item">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      <span>Search</span>
    </a>
    <a href="/" class="mobile-nav-item">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
        <line x1="8" y1="2" x2="8" y2="18"></line>
        <line x1="16" y1="6" x2="16" y2="22"></line>
      </svg>
      <span>Map</span>
    </a>
    <a href="/courses.html" class="mobile-nav-item active">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <rect x="3" y="3" width="7" height="7"></rect>
        <rect x="14" y="3" width="7" height="7"></rect>
        <rect x="14" y="14" width="7" height="7"></rect>
        <rect x="3" y="14" width="7" height="7"></rect>
      </svg>
      <span>Courses</span>
    </a>
  </nav>

  <script>
    // Mobile menu functions
    function toggleMobileMenu() {
      const overlay = document.getElementById('mobile-menu-overlay');
      const btn = document.querySelector('.mobile-menu-btn');
      if (overlay.classList.contains('active')) {
        closeMobileMenu();
      } else {
        overlay.classList.add('active');
        btn.setAttribute('aria-expanded', 'true');
        document.body.style.overflow = 'hidden';
      }
    }

    function closeMobileMenu() {
      const overlay = document.getElementById('mobile-menu-overlay');
      const btn = document.querySelector('.mobile-menu-btn');
      overlay.classList.remove('active');
      btn.setAttribute('aria-expanded', 'false');
      document.body.style.overflow = '';
    }

    // Close menu on escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeMobileMenu();
      }
    });
  </script>
</body>
</html>
